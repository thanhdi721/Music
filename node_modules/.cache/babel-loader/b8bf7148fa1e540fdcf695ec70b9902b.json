{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"children\", \"action\", \"showAction\", \"hideAction\", \"popupVisible\", \"defaultPopupVisible\", \"onPopupVisibleChange\", \"afterPopupVisibleChange\", \"mouseEnterDelay\", \"mouseLeaveDelay\", \"focusDelay\", \"blurDelay\", \"mask\", \"maskClosable\", \"getPopupContainer\", \"forceRender\", \"autoDestroy\", \"destroyPopupOnHide\", \"popup\", \"popupClassName\", \"popupStyle\", \"popupPlacement\", \"builtinPlacements\", \"popupAlign\", \"zIndex\", \"stretch\", \"getPopupClassNameFromAlign\", \"fresh\", \"alignPoint\", \"onPopupClick\", \"onPopupAlign\", \"arrow\", \"popupMotion\", \"maskMotion\", \"popupTransitionName\", \"popupAnimation\", \"maskTransitionName\", \"maskAnimation\", \"className\", \"getTriggerDOMNode\"];\nimport Portal from '@rc-component/portal';\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport { isDOM } from \"rc-util/es/Dom/findDOMNode\";\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useId from \"rc-util/es/hooks/useId\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport isMobile from \"rc-util/es/isMobile\";\nimport * as React from 'react';\nimport Popup from \"./Popup\";\nimport TriggerWrapper from \"./TriggerWrapper\";\nimport TriggerContext from \"./context\";\nimport useAction from \"./hooks/useAction\";\nimport useAlign from \"./hooks/useAlign\";\nimport useWatch from \"./hooks/useWatch\";\nimport useWinClick from \"./hooks/useWinClick\";\nimport { getAlignPopupClassName, getMotion } from \"./util\"; // Removed Props List\n// Seems this can be auto\n// getDocument?: (element?: HTMLElement) => Document;\n// New version will not wrap popup with `rc-trigger-popup-content` when multiple children\n\nexport function generateTrigger() {\n  var PortalComponent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Portal;\n  var Trigger = /*#__PURE__*/React.forwardRef(function (props, ref) {\n    var _props$prefixCls = props.prefixCls,\n        prefixCls = _props$prefixCls === void 0 ? 'rc-trigger-popup' : _props$prefixCls,\n        children = props.children,\n        _props$action = props.action,\n        action = _props$action === void 0 ? 'hover' : _props$action,\n        showAction = props.showAction,\n        hideAction = props.hideAction,\n        popupVisible = props.popupVisible,\n        defaultPopupVisible = props.defaultPopupVisible,\n        onPopupVisibleChange = props.onPopupVisibleChange,\n        afterPopupVisibleChange = props.afterPopupVisibleChange,\n        mouseEnterDelay = props.mouseEnterDelay,\n        _props$mouseLeaveDela = props.mouseLeaveDelay,\n        mouseLeaveDelay = _props$mouseLeaveDela === void 0 ? 0.1 : _props$mouseLeaveDela,\n        focusDelay = props.focusDelay,\n        blurDelay = props.blurDelay,\n        mask = props.mask,\n        _props$maskClosable = props.maskClosable,\n        maskClosable = _props$maskClosable === void 0 ? true : _props$maskClosable,\n        getPopupContainer = props.getPopupContainer,\n        forceRender = props.forceRender,\n        autoDestroy = props.autoDestroy,\n        destroyPopupOnHide = props.destroyPopupOnHide,\n        popup = props.popup,\n        popupClassName = props.popupClassName,\n        popupStyle = props.popupStyle,\n        popupPlacement = props.popupPlacement,\n        _props$builtinPlaceme = props.builtinPlacements,\n        builtinPlacements = _props$builtinPlaceme === void 0 ? {} : _props$builtinPlaceme,\n        popupAlign = props.popupAlign,\n        zIndex = props.zIndex,\n        stretch = props.stretch,\n        getPopupClassNameFromAlign = props.getPopupClassNameFromAlign,\n        fresh = props.fresh,\n        alignPoint = props.alignPoint,\n        onPopupClick = props.onPopupClick,\n        onPopupAlign = props.onPopupAlign,\n        arrow = props.arrow,\n        popupMotion = props.popupMotion,\n        maskMotion = props.maskMotion,\n        popupTransitionName = props.popupTransitionName,\n        popupAnimation = props.popupAnimation,\n        maskTransitionName = props.maskTransitionName,\n        maskAnimation = props.maskAnimation,\n        className = props.className,\n        getTriggerDOMNode = props.getTriggerDOMNode,\n        restProps = _objectWithoutProperties(props, _excluded);\n\n    var mergedAutoDestroy = autoDestroy || destroyPopupOnHide || false; // =========================== Mobile ===========================\n\n    var _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        mobile = _React$useState2[0],\n        setMobile = _React$useState2[1];\n\n    useLayoutEffect(function () {\n      setMobile(isMobile());\n    }, []); // ========================== Context ===========================\n\n    var subPopupElements = React.useRef({});\n    var parentContext = React.useContext(TriggerContext);\n    var context = React.useMemo(function () {\n      return {\n        registerSubPopup: function registerSubPopup(id, subPopupEle) {\n          subPopupElements.current[id] = subPopupEle;\n          parentContext === null || parentContext === void 0 || parentContext.registerSubPopup(id, subPopupEle);\n        }\n      };\n    }, [parentContext]); // =========================== Popup ============================\n\n    var id = useId();\n\n    var _React$useState3 = React.useState(null),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        popupEle = _React$useState4[0],\n        setPopupEle = _React$useState4[1]; // Used for forwardRef popup. Not use internal\n\n\n    var externalPopupRef = React.useRef(null);\n    var setPopupRef = useEvent(function (node) {\n      externalPopupRef.current = node;\n\n      if (isDOM(node) && popupEle !== node) {\n        setPopupEle(node);\n      }\n\n      parentContext === null || parentContext === void 0 || parentContext.registerSubPopup(id, node);\n    }); // =========================== Target ===========================\n    // Use state to control here since `useRef` update not trigger render\n\n    var _React$useState5 = React.useState(null),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        targetEle = _React$useState6[0],\n        setTargetEle = _React$useState6[1]; // Used for forwardRef target. Not use internal\n\n\n    var externalForwardRef = React.useRef(null);\n    var setTargetRef = useEvent(function (node) {\n      if (isDOM(node) && targetEle !== node) {\n        setTargetEle(node);\n        externalForwardRef.current = node;\n      }\n    }); // ========================== Children ==========================\n\n    var child = React.Children.only(children);\n    var originChildProps = (child === null || child === void 0 ? void 0 : child.props) || {};\n    var cloneProps = {};\n    var inPopupOrChild = useEvent(function (ele) {\n      var _getShadowRoot, _getShadowRoot2;\n\n      var childDOM = targetEle;\n      return (childDOM === null || childDOM === void 0 ? void 0 : childDOM.contains(ele)) || ((_getShadowRoot = getShadowRoot(childDOM)) === null || _getShadowRoot === void 0 ? void 0 : _getShadowRoot.host) === ele || ele === childDOM || (popupEle === null || popupEle === void 0 ? void 0 : popupEle.contains(ele)) || ((_getShadowRoot2 = getShadowRoot(popupEle)) === null || _getShadowRoot2 === void 0 ? void 0 : _getShadowRoot2.host) === ele || ele === popupEle || Object.values(subPopupElements.current).some(function (subPopupEle) {\n        return (subPopupEle === null || subPopupEle === void 0 ? void 0 : subPopupEle.contains(ele)) || ele === subPopupEle;\n      });\n    }); // =========================== Motion ===========================\n\n    var mergePopupMotion = getMotion(prefixCls, popupMotion, popupAnimation, popupTransitionName);\n    var mergeMaskMotion = getMotion(prefixCls, maskMotion, maskAnimation, maskTransitionName); // ============================ Open ============================\n\n    var _React$useState7 = React.useState(defaultPopupVisible || false),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        internalOpen = _React$useState8[0],\n        setInternalOpen = _React$useState8[1]; // Render still use props as first priority\n\n\n    var mergedOpen = popupVisible !== null && popupVisible !== void 0 ? popupVisible : internalOpen; // We use effect sync here in case `popupVisible` back to `undefined`\n\n    var setMergedOpen = useEvent(function (nextOpen) {\n      if (popupVisible === undefined) {\n        setInternalOpen(nextOpen);\n      }\n    });\n    useLayoutEffect(function () {\n      setInternalOpen(popupVisible || false);\n    }, [popupVisible]);\n    var openRef = React.useRef(mergedOpen);\n    openRef.current = mergedOpen;\n    var lastTriggerRef = React.useRef([]);\n    lastTriggerRef.current = [];\n    var internalTriggerOpen = useEvent(function (nextOpen) {\n      var _lastTriggerRef$curre;\n\n      setMergedOpen(nextOpen); // Enter or Pointer will both trigger open state change\n      // We only need take one to avoid duplicated change event trigger\n      // Use `lastTriggerRef` to record last open type\n\n      if (((_lastTriggerRef$curre = lastTriggerRef.current[lastTriggerRef.current.length - 1]) !== null && _lastTriggerRef$curre !== void 0 ? _lastTriggerRef$curre : mergedOpen) !== nextOpen) {\n        lastTriggerRef.current.push(nextOpen);\n        onPopupVisibleChange === null || onPopupVisibleChange === void 0 || onPopupVisibleChange(nextOpen);\n      }\n    }); // Trigger for delay\n\n    var delayRef = React.useRef();\n\n    var clearDelay = function clearDelay() {\n      clearTimeout(delayRef.current);\n    };\n\n    var triggerOpen = function triggerOpen(nextOpen) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      clearDelay();\n\n      if (delay === 0) {\n        internalTriggerOpen(nextOpen);\n      } else {\n        delayRef.current = setTimeout(function () {\n          internalTriggerOpen(nextOpen);\n        }, delay * 1000);\n      }\n    };\n\n    React.useEffect(function () {\n      return clearDelay;\n    }, []); // ========================== Motion ============================\n\n    var _React$useState9 = React.useState(false),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        inMotion = _React$useState10[0],\n        setInMotion = _React$useState10[1];\n\n    useLayoutEffect(function (firstMount) {\n      if (!firstMount || mergedOpen) {\n        setInMotion(true);\n      }\n    }, [mergedOpen]);\n\n    var _React$useState11 = React.useState(null),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        motionPrepareResolve = _React$useState12[0],\n        setMotionPrepareResolve = _React$useState12[1]; // =========================== Align ============================\n\n\n    var _React$useState13 = React.useState([0, 0]),\n        _React$useState14 = _slicedToArray(_React$useState13, 2),\n        mousePos = _React$useState14[0],\n        setMousePos = _React$useState14[1];\n\n    var setMousePosByEvent = function setMousePosByEvent(event) {\n      setMousePos([event.clientX, event.clientY]);\n    };\n\n    var _useAlign = useAlign(mergedOpen, popupEle, alignPoint ? mousePos : targetEle, popupPlacement, builtinPlacements, popupAlign, onPopupAlign),\n        _useAlign2 = _slicedToArray(_useAlign, 11),\n        ready = _useAlign2[0],\n        offsetX = _useAlign2[1],\n        offsetY = _useAlign2[2],\n        offsetR = _useAlign2[3],\n        offsetB = _useAlign2[4],\n        arrowX = _useAlign2[5],\n        arrowY = _useAlign2[6],\n        scaleX = _useAlign2[7],\n        scaleY = _useAlign2[8],\n        alignInfo = _useAlign2[9],\n        onAlign = _useAlign2[10];\n\n    var _useAction = useAction(mobile, action, showAction, hideAction),\n        _useAction2 = _slicedToArray(_useAction, 2),\n        showActions = _useAction2[0],\n        hideActions = _useAction2[1];\n\n    var clickToShow = showActions.has('click');\n    var clickToHide = hideActions.has('click') || hideActions.has('contextMenu');\n    var triggerAlign = useEvent(function () {\n      if (!inMotion) {\n        onAlign();\n      }\n    });\n\n    var onScroll = function onScroll() {\n      if (openRef.current && alignPoint && clickToHide) {\n        triggerOpen(false);\n      }\n    };\n\n    useWatch(mergedOpen, targetEle, popupEle, triggerAlign, onScroll);\n    useLayoutEffect(function () {\n      triggerAlign();\n    }, [mousePos, popupPlacement]); // When no builtinPlacements and popupAlign changed\n\n    useLayoutEffect(function () {\n      if (mergedOpen && !(builtinPlacements !== null && builtinPlacements !== void 0 && builtinPlacements[popupPlacement])) {\n        triggerAlign();\n      }\n    }, [JSON.stringify(popupAlign)]);\n    var alignedClassName = React.useMemo(function () {\n      var baseClassName = getAlignPopupClassName(builtinPlacements, prefixCls, alignInfo, alignPoint);\n      return classNames(baseClassName, getPopupClassNameFromAlign === null || getPopupClassNameFromAlign === void 0 ? void 0 : getPopupClassNameFromAlign(alignInfo));\n    }, [alignInfo, getPopupClassNameFromAlign, builtinPlacements, prefixCls, alignPoint]); // ============================ Refs ============================\n\n    React.useImperativeHandle(ref, function () {\n      return {\n        nativeElement: externalForwardRef.current,\n        popupElement: externalPopupRef.current,\n        forceAlign: triggerAlign\n      };\n    }); // ========================== Stretch ===========================\n\n    var _React$useState15 = React.useState(0),\n        _React$useState16 = _slicedToArray(_React$useState15, 2),\n        targetWidth = _React$useState16[0],\n        setTargetWidth = _React$useState16[1];\n\n    var _React$useState17 = React.useState(0),\n        _React$useState18 = _slicedToArray(_React$useState17, 2),\n        targetHeight = _React$useState18[0],\n        setTargetHeight = _React$useState18[1];\n\n    var syncTargetSize = function syncTargetSize() {\n      if (stretch && targetEle) {\n        var rect = targetEle.getBoundingClientRect();\n        setTargetWidth(rect.width);\n        setTargetHeight(rect.height);\n      }\n    };\n\n    var onTargetResize = function onTargetResize() {\n      syncTargetSize();\n      triggerAlign();\n    }; // ========================== Motion ============================\n\n\n    var onVisibleChanged = function onVisibleChanged(visible) {\n      setInMotion(false);\n      onAlign();\n      afterPopupVisibleChange === null || afterPopupVisibleChange === void 0 || afterPopupVisibleChange(visible);\n    }; // We will trigger align when motion is in prepare\n\n\n    var onPrepare = function onPrepare() {\n      return new Promise(function (resolve) {\n        syncTargetSize();\n        setMotionPrepareResolve(function () {\n          return resolve;\n        });\n      });\n    };\n\n    useLayoutEffect(function () {\n      if (motionPrepareResolve) {\n        onAlign();\n        motionPrepareResolve();\n        setMotionPrepareResolve(null);\n      }\n    }, [motionPrepareResolve]); // =========================== Action ===========================\n\n    /**\n     * Util wrapper for trigger action\n     */\n\n    function wrapperAction(eventName, nextOpen, delay, preEvent) {\n      cloneProps[eventName] = function (event) {\n        var _originChildProps$eve;\n\n        preEvent === null || preEvent === void 0 || preEvent(event);\n        triggerOpen(nextOpen, delay); // Pass to origin\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        (_originChildProps$eve = originChildProps[eventName]) === null || _originChildProps$eve === void 0 || _originChildProps$eve.call.apply(_originChildProps$eve, [originChildProps, event].concat(args));\n      };\n    } // ======================= Action: Click ========================\n\n\n    if (clickToShow || clickToHide) {\n      cloneProps.onClick = function (event) {\n        var _originChildProps$onC;\n\n        if (openRef.current && clickToHide) {\n          triggerOpen(false);\n        } else if (!openRef.current && clickToShow) {\n          setMousePosByEvent(event);\n          triggerOpen(true);\n        } // Pass to origin\n\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        (_originChildProps$onC = originChildProps.onClick) === null || _originChildProps$onC === void 0 || _originChildProps$onC.call.apply(_originChildProps$onC, [originChildProps, event].concat(args));\n      };\n    } // Click to hide is special action since click popup element should not hide\n\n\n    useWinClick(mergedOpen, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen); // ======================= Action: Hover ========================\n\n    var hoverToShow = showActions.has('hover');\n    var hoverToHide = hideActions.has('hover');\n    var onPopupMouseEnter;\n    var onPopupMouseLeave;\n\n    if (hoverToShow) {\n      // Compatible with old browser which not support pointer event\n      wrapperAction('onMouseEnter', true, mouseEnterDelay, function (event) {\n        setMousePosByEvent(event);\n      });\n      wrapperAction('onPointerEnter', true, mouseEnterDelay, function (event) {\n        setMousePosByEvent(event);\n      });\n\n      onPopupMouseEnter = function onPopupMouseEnter(event) {\n        // Only trigger re-open when popup is visible\n        if ((mergedOpen || inMotion) && popupEle !== null && popupEle !== void 0 && popupEle.contains(event.target)) {\n          triggerOpen(true, mouseEnterDelay);\n        }\n      }; // Align Point\n\n\n      if (alignPoint) {\n        cloneProps.onMouseMove = function (event) {\n          var _originChildProps$onM; // setMousePosByEvent(event);\n\n\n          (_originChildProps$onM = originChildProps.onMouseMove) === null || _originChildProps$onM === void 0 || _originChildProps$onM.call(originChildProps, event);\n        };\n      }\n    }\n\n    if (hoverToHide) {\n      wrapperAction('onMouseLeave', false, mouseLeaveDelay);\n      wrapperAction('onPointerLeave', false, mouseLeaveDelay);\n\n      onPopupMouseLeave = function onPopupMouseLeave() {\n        triggerOpen(false, mouseLeaveDelay);\n      };\n    } // ======================= Action: Focus ========================\n\n\n    if (showActions.has('focus')) {\n      wrapperAction('onFocus', true, focusDelay);\n    }\n\n    if (hideActions.has('focus')) {\n      wrapperAction('onBlur', false, blurDelay);\n    } // ==================== Action: ContextMenu =====================\n\n\n    if (showActions.has('contextMenu')) {\n      cloneProps.onContextMenu = function (event) {\n        var _originChildProps$onC2;\n\n        if (openRef.current && hideActions.has('contextMenu')) {\n          triggerOpen(false);\n        } else {\n          setMousePosByEvent(event);\n          triggerOpen(true);\n        }\n\n        event.preventDefault(); // Pass to origin\n\n        for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n\n        (_originChildProps$onC2 = originChildProps.onContextMenu) === null || _originChildProps$onC2 === void 0 || _originChildProps$onC2.call.apply(_originChildProps$onC2, [originChildProps, event].concat(args));\n      };\n    } // ========================= ClassName ==========================\n\n\n    if (className) {\n      cloneProps.className = classNames(originChildProps.className, className);\n    } // =========================== Render ===========================\n\n\n    var mergedChildrenProps = _objectSpread(_objectSpread({}, originChildProps), cloneProps); // Pass props into cloneProps for nest usage\n\n\n    var passedProps = {};\n    var passedEventList = ['onContextMenu', 'onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur'];\n    passedEventList.forEach(function (eventName) {\n      if (restProps[eventName]) {\n        passedProps[eventName] = function () {\n          var _mergedChildrenProps$;\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          (_mergedChildrenProps$ = mergedChildrenProps[eventName]) === null || _mergedChildrenProps$ === void 0 || _mergedChildrenProps$.call.apply(_mergedChildrenProps$, [mergedChildrenProps].concat(args));\n          restProps[eventName].apply(restProps, args);\n        };\n      }\n    }); // Child Node\n\n    var triggerNode = /*#__PURE__*/React.cloneElement(child, _objectSpread(_objectSpread({}, mergedChildrenProps), passedProps));\n    var arrowPos = {\n      x: arrowX,\n      y: arrowY\n    };\n    var innerArrow = arrow ? _objectSpread({}, arrow !== true ? arrow : {}) : null; // Render\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ResizeObserver, {\n      disabled: !mergedOpen,\n      ref: setTargetRef,\n      onResize: onTargetResize\n    }, /*#__PURE__*/React.createElement(TriggerWrapper, {\n      getTriggerDOMNode: getTriggerDOMNode\n    }, triggerNode)), /*#__PURE__*/React.createElement(TriggerContext.Provider, {\n      value: context\n    }, /*#__PURE__*/React.createElement(Popup, {\n      portal: PortalComponent,\n      ref: setPopupRef,\n      prefixCls: prefixCls,\n      popup: popup,\n      className: classNames(popupClassName, alignedClassName),\n      style: popupStyle,\n      target: targetEle,\n      onMouseEnter: onPopupMouseEnter,\n      onMouseLeave: onPopupMouseLeave // https://github.com/ant-design/ant-design/issues/43924\n      ,\n      onPointerEnter: onPopupMouseEnter,\n      zIndex: zIndex // Open\n      ,\n      open: mergedOpen,\n      keepDom: inMotion,\n      fresh: fresh // Click\n      ,\n      onClick: onPopupClick // Mask\n      ,\n      mask: mask // Motion\n      ,\n      motion: mergePopupMotion,\n      maskMotion: mergeMaskMotion,\n      onVisibleChanged: onVisibleChanged,\n      onPrepare: onPrepare // Portal\n      ,\n      forceRender: forceRender,\n      autoDestroy: mergedAutoDestroy,\n      getPopupContainer: getPopupContainer // Arrow\n      ,\n      align: alignInfo,\n      arrow: innerArrow,\n      arrowPos: arrowPos // Align\n      ,\n      ready: ready,\n      offsetX: offsetX,\n      offsetY: offsetY,\n      offsetR: offsetR,\n      offsetB: offsetB,\n      onAlign: triggerAlign // Stretch\n      ,\n      stretch: stretch,\n      targetWidth: targetWidth / scaleX,\n      targetHeight: targetHeight / scaleY\n    })));\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    Trigger.displayName = 'Trigger';\n  }\n\n  return Trigger;\n}\nexport default generateTrigger(Portal);","map":{"version":3,"sources":["D:/WED/SpotifyProject-master/node_modules/@rc-component/trigger/es/index.js"],"names":["_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","Portal","classNames","ResizeObserver","isDOM","getShadowRoot","useEvent","useId","useLayoutEffect","isMobile","React","Popup","TriggerWrapper","TriggerContext","useAction","useAlign","useWatch","useWinClick","getAlignPopupClassName","getMotion","generateTrigger","PortalComponent","arguments","length","undefined","Trigger","forwardRef","props","ref","_props$prefixCls","prefixCls","children","_props$action","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","_props$mouseLeaveDela","mouseLeaveDelay","focusDelay","blurDelay","mask","_props$maskClosable","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","_props$builtinPlaceme","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode","restProps","mergedAutoDestroy","_React$useState","useState","_React$useState2","mobile","setMobile","subPopupElements","useRef","parentContext","useContext","context","useMemo","registerSubPopup","id","subPopupEle","current","_React$useState3","_React$useState4","popupEle","setPopupEle","externalPopupRef","setPopupRef","node","_React$useState5","_React$useState6","targetEle","setTargetEle","externalForwardRef","setTargetRef","child","Children","only","originChildProps","cloneProps","inPopupOrChild","ele","_getShadowRoot","_getShadowRoot2","childDOM","contains","host","Object","values","some","mergePopupMotion","mergeMaskMotion","_React$useState7","_React$useState8","internalOpen","setInternalOpen","mergedOpen","setMergedOpen","nextOpen","openRef","lastTriggerRef","internalTriggerOpen","_lastTriggerRef$curre","push","delayRef","clearDelay","clearTimeout","triggerOpen","delay","setTimeout","useEffect","_React$useState9","_React$useState10","inMotion","setInMotion","firstMount","_React$useState11","_React$useState12","motionPrepareResolve","setMotionPrepareResolve","_React$useState13","_React$useState14","mousePos","setMousePos","setMousePosByEvent","event","clientX","clientY","_useAlign","_useAlign2","ready","offsetX","offsetY","offsetR","offsetB","arrowX","arrowY","scaleX","scaleY","alignInfo","onAlign","_useAction","_useAction2","showActions","hideActions","clickToShow","has","clickToHide","triggerAlign","onScroll","JSON","stringify","alignedClassName","baseClassName","useImperativeHandle","nativeElement","popupElement","forceAlign","_React$useState15","_React$useState16","targetWidth","setTargetWidth","_React$useState17","_React$useState18","targetHeight","setTargetHeight","syncTargetSize","rect","getBoundingClientRect","width","height","onTargetResize","onVisibleChanged","visible","onPrepare","Promise","resolve","wrapperAction","eventName","preEvent","_originChildProps$eve","_len","args","Array","_key","call","apply","concat","onClick","_originChildProps$onC","_len2","_key2","hoverToShow","hoverToHide","onPopupMouseEnter","onPopupMouseLeave","target","onMouseMove","_originChildProps$onM","onContextMenu","_originChildProps$onC2","preventDefault","_len3","_key3","mergedChildrenProps","passedProps","passedEventList","forEach","_mergedChildrenProps$","_len4","_key4","triggerNode","cloneElement","arrowPos","x","y","innerArrow","createElement","Fragment","disabled","onResize","Provider","value","portal","style","onMouseEnter","onMouseLeave","onPointerEnter","open","keepDom","motion","align","process","env","NODE_ENV","displayName"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"children\", \"action\", \"showAction\", \"hideAction\", \"popupVisible\", \"defaultPopupVisible\", \"onPopupVisibleChange\", \"afterPopupVisibleChange\", \"mouseEnterDelay\", \"mouseLeaveDelay\", \"focusDelay\", \"blurDelay\", \"mask\", \"maskClosable\", \"getPopupContainer\", \"forceRender\", \"autoDestroy\", \"destroyPopupOnHide\", \"popup\", \"popupClassName\", \"popupStyle\", \"popupPlacement\", \"builtinPlacements\", \"popupAlign\", \"zIndex\", \"stretch\", \"getPopupClassNameFromAlign\", \"fresh\", \"alignPoint\", \"onPopupClick\", \"onPopupAlign\", \"arrow\", \"popupMotion\", \"maskMotion\", \"popupTransitionName\", \"popupAnimation\", \"maskTransitionName\", \"maskAnimation\", \"className\", \"getTriggerDOMNode\"];\nimport Portal from '@rc-component/portal';\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport { isDOM } from \"rc-util/es/Dom/findDOMNode\";\nimport { getShadowRoot } from \"rc-util/es/Dom/shadow\";\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport useId from \"rc-util/es/hooks/useId\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport isMobile from \"rc-util/es/isMobile\";\nimport * as React from 'react';\nimport Popup from \"./Popup\";\nimport TriggerWrapper from \"./TriggerWrapper\";\nimport TriggerContext from \"./context\";\nimport useAction from \"./hooks/useAction\";\nimport useAlign from \"./hooks/useAlign\";\nimport useWatch from \"./hooks/useWatch\";\nimport useWinClick from \"./hooks/useWinClick\";\nimport { getAlignPopupClassName, getMotion } from \"./util\";\n\n// Removed Props List\n// Seems this can be auto\n// getDocument?: (element?: HTMLElement) => Document;\n\n// New version will not wrap popup with `rc-trigger-popup-content` when multiple children\n\nexport function generateTrigger() {\n  var PortalComponent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Portal;\n  var Trigger = /*#__PURE__*/React.forwardRef(function (props, ref) {\n    var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-trigger-popup' : _props$prefixCls,\n      children = props.children,\n      _props$action = props.action,\n      action = _props$action === void 0 ? 'hover' : _props$action,\n      showAction = props.showAction,\n      hideAction = props.hideAction,\n      popupVisible = props.popupVisible,\n      defaultPopupVisible = props.defaultPopupVisible,\n      onPopupVisibleChange = props.onPopupVisibleChange,\n      afterPopupVisibleChange = props.afterPopupVisibleChange,\n      mouseEnterDelay = props.mouseEnterDelay,\n      _props$mouseLeaveDela = props.mouseLeaveDelay,\n      mouseLeaveDelay = _props$mouseLeaveDela === void 0 ? 0.1 : _props$mouseLeaveDela,\n      focusDelay = props.focusDelay,\n      blurDelay = props.blurDelay,\n      mask = props.mask,\n      _props$maskClosable = props.maskClosable,\n      maskClosable = _props$maskClosable === void 0 ? true : _props$maskClosable,\n      getPopupContainer = props.getPopupContainer,\n      forceRender = props.forceRender,\n      autoDestroy = props.autoDestroy,\n      destroyPopupOnHide = props.destroyPopupOnHide,\n      popup = props.popup,\n      popupClassName = props.popupClassName,\n      popupStyle = props.popupStyle,\n      popupPlacement = props.popupPlacement,\n      _props$builtinPlaceme = props.builtinPlacements,\n      builtinPlacements = _props$builtinPlaceme === void 0 ? {} : _props$builtinPlaceme,\n      popupAlign = props.popupAlign,\n      zIndex = props.zIndex,\n      stretch = props.stretch,\n      getPopupClassNameFromAlign = props.getPopupClassNameFromAlign,\n      fresh = props.fresh,\n      alignPoint = props.alignPoint,\n      onPopupClick = props.onPopupClick,\n      onPopupAlign = props.onPopupAlign,\n      arrow = props.arrow,\n      popupMotion = props.popupMotion,\n      maskMotion = props.maskMotion,\n      popupTransitionName = props.popupTransitionName,\n      popupAnimation = props.popupAnimation,\n      maskTransitionName = props.maskTransitionName,\n      maskAnimation = props.maskAnimation,\n      className = props.className,\n      getTriggerDOMNode = props.getTriggerDOMNode,\n      restProps = _objectWithoutProperties(props, _excluded);\n    var mergedAutoDestroy = autoDestroy || destroyPopupOnHide || false;\n\n    // =========================== Mobile ===========================\n    var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      mobile = _React$useState2[0],\n      setMobile = _React$useState2[1];\n    useLayoutEffect(function () {\n      setMobile(isMobile());\n    }, []);\n\n    // ========================== Context ===========================\n    var subPopupElements = React.useRef({});\n    var parentContext = React.useContext(TriggerContext);\n    var context = React.useMemo(function () {\n      return {\n        registerSubPopup: function registerSubPopup(id, subPopupEle) {\n          subPopupElements.current[id] = subPopupEle;\n          parentContext === null || parentContext === void 0 || parentContext.registerSubPopup(id, subPopupEle);\n        }\n      };\n    }, [parentContext]);\n\n    // =========================== Popup ============================\n    var id = useId();\n    var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      popupEle = _React$useState4[0],\n      setPopupEle = _React$useState4[1];\n\n    // Used for forwardRef popup. Not use internal\n    var externalPopupRef = React.useRef(null);\n    var setPopupRef = useEvent(function (node) {\n      externalPopupRef.current = node;\n      if (isDOM(node) && popupEle !== node) {\n        setPopupEle(node);\n      }\n      parentContext === null || parentContext === void 0 || parentContext.registerSubPopup(id, node);\n    });\n\n    // =========================== Target ===========================\n    // Use state to control here since `useRef` update not trigger render\n    var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      targetEle = _React$useState6[0],\n      setTargetEle = _React$useState6[1];\n\n    // Used for forwardRef target. Not use internal\n    var externalForwardRef = React.useRef(null);\n    var setTargetRef = useEvent(function (node) {\n      if (isDOM(node) && targetEle !== node) {\n        setTargetEle(node);\n        externalForwardRef.current = node;\n      }\n    });\n\n    // ========================== Children ==========================\n    var child = React.Children.only(children);\n    var originChildProps = (child === null || child === void 0 ? void 0 : child.props) || {};\n    var cloneProps = {};\n    var inPopupOrChild = useEvent(function (ele) {\n      var _getShadowRoot, _getShadowRoot2;\n      var childDOM = targetEle;\n      return (childDOM === null || childDOM === void 0 ? void 0 : childDOM.contains(ele)) || ((_getShadowRoot = getShadowRoot(childDOM)) === null || _getShadowRoot === void 0 ? void 0 : _getShadowRoot.host) === ele || ele === childDOM || (popupEle === null || popupEle === void 0 ? void 0 : popupEle.contains(ele)) || ((_getShadowRoot2 = getShadowRoot(popupEle)) === null || _getShadowRoot2 === void 0 ? void 0 : _getShadowRoot2.host) === ele || ele === popupEle || Object.values(subPopupElements.current).some(function (subPopupEle) {\n        return (subPopupEle === null || subPopupEle === void 0 ? void 0 : subPopupEle.contains(ele)) || ele === subPopupEle;\n      });\n    });\n\n    // =========================== Motion ===========================\n    var mergePopupMotion = getMotion(prefixCls, popupMotion, popupAnimation, popupTransitionName);\n    var mergeMaskMotion = getMotion(prefixCls, maskMotion, maskAnimation, maskTransitionName);\n\n    // ============================ Open ============================\n    var _React$useState7 = React.useState(defaultPopupVisible || false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      internalOpen = _React$useState8[0],\n      setInternalOpen = _React$useState8[1];\n\n    // Render still use props as first priority\n    var mergedOpen = popupVisible !== null && popupVisible !== void 0 ? popupVisible : internalOpen;\n\n    // We use effect sync here in case `popupVisible` back to `undefined`\n    var setMergedOpen = useEvent(function (nextOpen) {\n      if (popupVisible === undefined) {\n        setInternalOpen(nextOpen);\n      }\n    });\n    useLayoutEffect(function () {\n      setInternalOpen(popupVisible || false);\n    }, [popupVisible]);\n    var openRef = React.useRef(mergedOpen);\n    openRef.current = mergedOpen;\n    var lastTriggerRef = React.useRef([]);\n    lastTriggerRef.current = [];\n    var internalTriggerOpen = useEvent(function (nextOpen) {\n      var _lastTriggerRef$curre;\n      setMergedOpen(nextOpen);\n\n      // Enter or Pointer will both trigger open state change\n      // We only need take one to avoid duplicated change event trigger\n      // Use `lastTriggerRef` to record last open type\n      if (((_lastTriggerRef$curre = lastTriggerRef.current[lastTriggerRef.current.length - 1]) !== null && _lastTriggerRef$curre !== void 0 ? _lastTriggerRef$curre : mergedOpen) !== nextOpen) {\n        lastTriggerRef.current.push(nextOpen);\n        onPopupVisibleChange === null || onPopupVisibleChange === void 0 || onPopupVisibleChange(nextOpen);\n      }\n    });\n\n    // Trigger for delay\n    var delayRef = React.useRef();\n    var clearDelay = function clearDelay() {\n      clearTimeout(delayRef.current);\n    };\n    var triggerOpen = function triggerOpen(nextOpen) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      clearDelay();\n      if (delay === 0) {\n        internalTriggerOpen(nextOpen);\n      } else {\n        delayRef.current = setTimeout(function () {\n          internalTriggerOpen(nextOpen);\n        }, delay * 1000);\n      }\n    };\n    React.useEffect(function () {\n      return clearDelay;\n    }, []);\n\n    // ========================== Motion ============================\n    var _React$useState9 = React.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      inMotion = _React$useState10[0],\n      setInMotion = _React$useState10[1];\n    useLayoutEffect(function (firstMount) {\n      if (!firstMount || mergedOpen) {\n        setInMotion(true);\n      }\n    }, [mergedOpen]);\n    var _React$useState11 = React.useState(null),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      motionPrepareResolve = _React$useState12[0],\n      setMotionPrepareResolve = _React$useState12[1];\n\n    // =========================== Align ============================\n    var _React$useState13 = React.useState([0, 0]),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      mousePos = _React$useState14[0],\n      setMousePos = _React$useState14[1];\n    var setMousePosByEvent = function setMousePosByEvent(event) {\n      setMousePos([event.clientX, event.clientY]);\n    };\n    var _useAlign = useAlign(mergedOpen, popupEle, alignPoint ? mousePos : targetEle, popupPlacement, builtinPlacements, popupAlign, onPopupAlign),\n      _useAlign2 = _slicedToArray(_useAlign, 11),\n      ready = _useAlign2[0],\n      offsetX = _useAlign2[1],\n      offsetY = _useAlign2[2],\n      offsetR = _useAlign2[3],\n      offsetB = _useAlign2[4],\n      arrowX = _useAlign2[5],\n      arrowY = _useAlign2[6],\n      scaleX = _useAlign2[7],\n      scaleY = _useAlign2[8],\n      alignInfo = _useAlign2[9],\n      onAlign = _useAlign2[10];\n    var _useAction = useAction(mobile, action, showAction, hideAction),\n      _useAction2 = _slicedToArray(_useAction, 2),\n      showActions = _useAction2[0],\n      hideActions = _useAction2[1];\n    var clickToShow = showActions.has('click');\n    var clickToHide = hideActions.has('click') || hideActions.has('contextMenu');\n    var triggerAlign = useEvent(function () {\n      if (!inMotion) {\n        onAlign();\n      }\n    });\n    var onScroll = function onScroll() {\n      if (openRef.current && alignPoint && clickToHide) {\n        triggerOpen(false);\n      }\n    };\n    useWatch(mergedOpen, targetEle, popupEle, triggerAlign, onScroll);\n    useLayoutEffect(function () {\n      triggerAlign();\n    }, [mousePos, popupPlacement]);\n\n    // When no builtinPlacements and popupAlign changed\n    useLayoutEffect(function () {\n      if (mergedOpen && !(builtinPlacements !== null && builtinPlacements !== void 0 && builtinPlacements[popupPlacement])) {\n        triggerAlign();\n      }\n    }, [JSON.stringify(popupAlign)]);\n    var alignedClassName = React.useMemo(function () {\n      var baseClassName = getAlignPopupClassName(builtinPlacements, prefixCls, alignInfo, alignPoint);\n      return classNames(baseClassName, getPopupClassNameFromAlign === null || getPopupClassNameFromAlign === void 0 ? void 0 : getPopupClassNameFromAlign(alignInfo));\n    }, [alignInfo, getPopupClassNameFromAlign, builtinPlacements, prefixCls, alignPoint]);\n\n    // ============================ Refs ============================\n    React.useImperativeHandle(ref, function () {\n      return {\n        nativeElement: externalForwardRef.current,\n        popupElement: externalPopupRef.current,\n        forceAlign: triggerAlign\n      };\n    });\n\n    // ========================== Stretch ===========================\n    var _React$useState15 = React.useState(0),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      targetWidth = _React$useState16[0],\n      setTargetWidth = _React$useState16[1];\n    var _React$useState17 = React.useState(0),\n      _React$useState18 = _slicedToArray(_React$useState17, 2),\n      targetHeight = _React$useState18[0],\n      setTargetHeight = _React$useState18[1];\n    var syncTargetSize = function syncTargetSize() {\n      if (stretch && targetEle) {\n        var rect = targetEle.getBoundingClientRect();\n        setTargetWidth(rect.width);\n        setTargetHeight(rect.height);\n      }\n    };\n    var onTargetResize = function onTargetResize() {\n      syncTargetSize();\n      triggerAlign();\n    };\n\n    // ========================== Motion ============================\n    var onVisibleChanged = function onVisibleChanged(visible) {\n      setInMotion(false);\n      onAlign();\n      afterPopupVisibleChange === null || afterPopupVisibleChange === void 0 || afterPopupVisibleChange(visible);\n    };\n\n    // We will trigger align when motion is in prepare\n    var onPrepare = function onPrepare() {\n      return new Promise(function (resolve) {\n        syncTargetSize();\n        setMotionPrepareResolve(function () {\n          return resolve;\n        });\n      });\n    };\n    useLayoutEffect(function () {\n      if (motionPrepareResolve) {\n        onAlign();\n        motionPrepareResolve();\n        setMotionPrepareResolve(null);\n      }\n    }, [motionPrepareResolve]);\n\n    // =========================== Action ===========================\n    /**\n     * Util wrapper for trigger action\n     */\n    function wrapperAction(eventName, nextOpen, delay, preEvent) {\n      cloneProps[eventName] = function (event) {\n        var _originChildProps$eve;\n        preEvent === null || preEvent === void 0 || preEvent(event);\n        triggerOpen(nextOpen, delay);\n\n        // Pass to origin\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        (_originChildProps$eve = originChildProps[eventName]) === null || _originChildProps$eve === void 0 || _originChildProps$eve.call.apply(_originChildProps$eve, [originChildProps, event].concat(args));\n      };\n    }\n\n    // ======================= Action: Click ========================\n    if (clickToShow || clickToHide) {\n      cloneProps.onClick = function (event) {\n        var _originChildProps$onC;\n        if (openRef.current && clickToHide) {\n          triggerOpen(false);\n        } else if (!openRef.current && clickToShow) {\n          setMousePosByEvent(event);\n          triggerOpen(true);\n        }\n\n        // Pass to origin\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        (_originChildProps$onC = originChildProps.onClick) === null || _originChildProps$onC === void 0 || _originChildProps$onC.call.apply(_originChildProps$onC, [originChildProps, event].concat(args));\n      };\n    }\n\n    // Click to hide is special action since click popup element should not hide\n    useWinClick(mergedOpen, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen);\n\n    // ======================= Action: Hover ========================\n    var hoverToShow = showActions.has('hover');\n    var hoverToHide = hideActions.has('hover');\n    var onPopupMouseEnter;\n    var onPopupMouseLeave;\n    if (hoverToShow) {\n      // Compatible with old browser which not support pointer event\n      wrapperAction('onMouseEnter', true, mouseEnterDelay, function (event) {\n        setMousePosByEvent(event);\n      });\n      wrapperAction('onPointerEnter', true, mouseEnterDelay, function (event) {\n        setMousePosByEvent(event);\n      });\n      onPopupMouseEnter = function onPopupMouseEnter(event) {\n        // Only trigger re-open when popup is visible\n        if ((mergedOpen || inMotion) && popupEle !== null && popupEle !== void 0 && popupEle.contains(event.target)) {\n          triggerOpen(true, mouseEnterDelay);\n        }\n      };\n\n      // Align Point\n      if (alignPoint) {\n        cloneProps.onMouseMove = function (event) {\n          var _originChildProps$onM;\n          // setMousePosByEvent(event);\n          (_originChildProps$onM = originChildProps.onMouseMove) === null || _originChildProps$onM === void 0 || _originChildProps$onM.call(originChildProps, event);\n        };\n      }\n    }\n    if (hoverToHide) {\n      wrapperAction('onMouseLeave', false, mouseLeaveDelay);\n      wrapperAction('onPointerLeave', false, mouseLeaveDelay);\n      onPopupMouseLeave = function onPopupMouseLeave() {\n        triggerOpen(false, mouseLeaveDelay);\n      };\n    }\n\n    // ======================= Action: Focus ========================\n    if (showActions.has('focus')) {\n      wrapperAction('onFocus', true, focusDelay);\n    }\n    if (hideActions.has('focus')) {\n      wrapperAction('onBlur', false, blurDelay);\n    }\n\n    // ==================== Action: ContextMenu =====================\n    if (showActions.has('contextMenu')) {\n      cloneProps.onContextMenu = function (event) {\n        var _originChildProps$onC2;\n        if (openRef.current && hideActions.has('contextMenu')) {\n          triggerOpen(false);\n        } else {\n          setMousePosByEvent(event);\n          triggerOpen(true);\n        }\n        event.preventDefault();\n\n        // Pass to origin\n        for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n        (_originChildProps$onC2 = originChildProps.onContextMenu) === null || _originChildProps$onC2 === void 0 || _originChildProps$onC2.call.apply(_originChildProps$onC2, [originChildProps, event].concat(args));\n      };\n    }\n\n    // ========================= ClassName ==========================\n    if (className) {\n      cloneProps.className = classNames(originChildProps.className, className);\n    }\n\n    // =========================== Render ===========================\n    var mergedChildrenProps = _objectSpread(_objectSpread({}, originChildProps), cloneProps);\n\n    // Pass props into cloneProps for nest usage\n    var passedProps = {};\n    var passedEventList = ['onContextMenu', 'onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter', 'onMouseLeave', 'onFocus', 'onBlur'];\n    passedEventList.forEach(function (eventName) {\n      if (restProps[eventName]) {\n        passedProps[eventName] = function () {\n          var _mergedChildrenProps$;\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n          (_mergedChildrenProps$ = mergedChildrenProps[eventName]) === null || _mergedChildrenProps$ === void 0 || _mergedChildrenProps$.call.apply(_mergedChildrenProps$, [mergedChildrenProps].concat(args));\n          restProps[eventName].apply(restProps, args);\n        };\n      }\n    });\n\n    // Child Node\n    var triggerNode = /*#__PURE__*/React.cloneElement(child, _objectSpread(_objectSpread({}, mergedChildrenProps), passedProps));\n    var arrowPos = {\n      x: arrowX,\n      y: arrowY\n    };\n    var innerArrow = arrow ? _objectSpread({}, arrow !== true ? arrow : {}) : null;\n\n    // Render\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ResizeObserver, {\n      disabled: !mergedOpen,\n      ref: setTargetRef,\n      onResize: onTargetResize\n    }, /*#__PURE__*/React.createElement(TriggerWrapper, {\n      getTriggerDOMNode: getTriggerDOMNode\n    }, triggerNode)), /*#__PURE__*/React.createElement(TriggerContext.Provider, {\n      value: context\n    }, /*#__PURE__*/React.createElement(Popup, {\n      portal: PortalComponent,\n      ref: setPopupRef,\n      prefixCls: prefixCls,\n      popup: popup,\n      className: classNames(popupClassName, alignedClassName),\n      style: popupStyle,\n      target: targetEle,\n      onMouseEnter: onPopupMouseEnter,\n      onMouseLeave: onPopupMouseLeave\n      // https://github.com/ant-design/ant-design/issues/43924\n      ,\n      onPointerEnter: onPopupMouseEnter,\n      zIndex: zIndex\n      // Open\n      ,\n      open: mergedOpen,\n      keepDom: inMotion,\n      fresh: fresh\n      // Click\n      ,\n      onClick: onPopupClick\n      // Mask\n      ,\n      mask: mask\n      // Motion\n      ,\n      motion: mergePopupMotion,\n      maskMotion: mergeMaskMotion,\n      onVisibleChanged: onVisibleChanged,\n      onPrepare: onPrepare\n      // Portal\n      ,\n      forceRender: forceRender,\n      autoDestroy: mergedAutoDestroy,\n      getPopupContainer: getPopupContainer\n      // Arrow\n      ,\n      align: alignInfo,\n      arrow: innerArrow,\n      arrowPos: arrowPos\n      // Align\n      ,\n      ready: ready,\n      offsetX: offsetX,\n      offsetY: offsetY,\n      offsetR: offsetR,\n      offsetB: offsetB,\n      onAlign: triggerAlign\n      // Stretch\n      ,\n      stretch: stretch,\n      targetWidth: targetWidth / scaleX,\n      targetHeight: targetHeight / scaleY\n    })));\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    Trigger.displayName = 'Trigger';\n  }\n  return Trigger;\n}\nexport default generateTrigger(Portal);"]},"metadata":{},"sourceType":"module"}