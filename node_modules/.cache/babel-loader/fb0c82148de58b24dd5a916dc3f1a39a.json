{"ast":null,"code":"import * as React from 'react'; // recursion (flat tree structure)\n\nfunction fillRecords(list, record, indent, childrenColumnName, expandedKeys, getRowKey, index) {\n  list.push({\n    record: record,\n    indent: indent,\n    index: index\n  });\n  var key = getRowKey(record);\n  var expanded = expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.has(key);\n\n  if (record && Array.isArray(record[childrenColumnName]) && expanded) {\n    // expanded state, flat record\n    for (var i = 0; i < record[childrenColumnName].length; i += 1) {\n      fillRecords(list, record[childrenColumnName][i], indent + 1, childrenColumnName, expandedKeys, getRowKey, i);\n    }\n  }\n}\n/**\n * flat tree data on expanded state\n *\n * @export\n * @template T\n * @param {*} data : table data\n * @param {string} childrenColumnName : 指定树形结构的列名\n * @param {Set<Key>} expandedKeys : 展开的行对应的keys\n * @param {GetRowKey<T>} getRowKey  : 获取当前rowKey的方法\n * @returns flattened data\n */\n\n\nexport default function useFlattenRecords(data, childrenColumnName, expandedKeys, getRowKey) {\n  var arr = React.useMemo(function () {\n    if (expandedKeys !== null && expandedKeys !== void 0 && expandedKeys.size) {\n      var list = []; // collect flattened record\n\n      for (var i = 0; i < (data === null || data === void 0 ? void 0 : data.length); i += 1) {\n        var record = data[i]; // using array.push or spread operator may cause \"Maximum call stack size exceeded\" exception if array size is big enough.\n\n        fillRecords(list, record, 0, childrenColumnName, expandedKeys, getRowKey, i);\n      }\n\n      return list;\n    }\n\n    return data === null || data === void 0 ? void 0 : data.map(function (item, index) {\n      return {\n        record: item,\n        indent: 0,\n        index: index\n      };\n    });\n  }, [data, childrenColumnName, expandedKeys, getRowKey]);\n  return arr;\n}","map":{"version":3,"sources":["D:/WED/SpotifyProject-master/node_modules/rc-table/es/hooks/useFlattenRecords.js"],"names":["React","fillRecords","list","record","indent","childrenColumnName","expandedKeys","getRowKey","index","push","key","expanded","has","Array","isArray","i","length","useFlattenRecords","data","arr","useMemo","size","map","item"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB,C,CACA;;AACA,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,MAA3B,EAAmCC,MAAnC,EAA2CC,kBAA3C,EAA+DC,YAA/D,EAA6EC,SAA7E,EAAwFC,KAAxF,EAA+F;AAC7FN,EAAAA,IAAI,CAACO,IAAL,CAAU;AACRN,IAAAA,MAAM,EAAEA,MADA;AAERC,IAAAA,MAAM,EAAEA,MAFA;AAGRI,IAAAA,KAAK,EAAEA;AAHC,GAAV;AAKA,MAAIE,GAAG,GAAGH,SAAS,CAACJ,MAAD,CAAnB;AACA,MAAIQ,QAAQ,GAAGL,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAACM,GAAb,CAAiBF,GAAjB,CAA3E;;AACA,MAAIP,MAAM,IAAIU,KAAK,CAACC,OAAN,CAAcX,MAAM,CAACE,kBAAD,CAApB,CAAV,IAAuDM,QAA3D,EAAqE;AACnE;AACA,SAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,MAAM,CAACE,kBAAD,CAAN,CAA2BW,MAA/C,EAAuDD,CAAC,IAAI,CAA5D,EAA+D;AAC7Dd,MAAAA,WAAW,CAACC,IAAD,EAAOC,MAAM,CAACE,kBAAD,CAAN,CAA2BU,CAA3B,CAAP,EAAsCX,MAAM,GAAG,CAA/C,EAAkDC,kBAAlD,EAAsEC,YAAtE,EAAoFC,SAApF,EAA+FQ,CAA/F,CAAX;AACD;AACF;AACF;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAe,SAASE,iBAAT,CAA2BC,IAA3B,EAAiCb,kBAAjC,EAAqDC,YAArD,EAAmEC,SAAnE,EAA8E;AAC3F,MAAIY,GAAG,GAAGnB,KAAK,CAACoB,OAAN,CAAc,YAAY;AAClC,QAAId,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,IAAoDA,YAAY,CAACe,IAArE,EAA2E;AACzE,UAAInB,IAAI,GAAG,EAAX,CADyE,CAGzE;;AACA,WAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIG,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACF,MAArD,CAAjB,EAA+ED,CAAC,IAAI,CAApF,EAAuF;AACrF,YAAIZ,MAAM,GAAGe,IAAI,CAACH,CAAD,CAAjB,CADqF,CAGrF;;AACAd,QAAAA,WAAW,CAACC,IAAD,EAAOC,MAAP,EAAe,CAAf,EAAkBE,kBAAlB,EAAsCC,YAAtC,EAAoDC,SAApD,EAA+DQ,CAA/D,CAAX;AACD;;AACD,aAAOb,IAAP;AACD;;AACD,WAAOgB,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACI,GAAL,CAAS,UAAUC,IAAV,EAAgBf,KAAhB,EAAuB;AACjF,aAAO;AACLL,QAAAA,MAAM,EAAEoB,IADH;AAELnB,QAAAA,MAAM,EAAE,CAFH;AAGLI,QAAAA,KAAK,EAAEA;AAHF,OAAP;AAKD,KANkD,CAAnD;AAOD,GApBS,EAoBP,CAACU,IAAD,EAAOb,kBAAP,EAA2BC,YAA3B,EAAyCC,SAAzC,CApBO,CAAV;AAqBA,SAAOY,GAAP;AACD","sourcesContent":["import * as React from 'react';\n// recursion (flat tree structure)\nfunction fillRecords(list, record, indent, childrenColumnName, expandedKeys, getRowKey, index) {\n  list.push({\n    record: record,\n    indent: indent,\n    index: index\n  });\n  var key = getRowKey(record);\n  var expanded = expandedKeys === null || expandedKeys === void 0 ? void 0 : expandedKeys.has(key);\n  if (record && Array.isArray(record[childrenColumnName]) && expanded) {\n    // expanded state, flat record\n    for (var i = 0; i < record[childrenColumnName].length; i += 1) {\n      fillRecords(list, record[childrenColumnName][i], indent + 1, childrenColumnName, expandedKeys, getRowKey, i);\n    }\n  }\n}\n/**\n * flat tree data on expanded state\n *\n * @export\n * @template T\n * @param {*} data : table data\n * @param {string} childrenColumnName : 指定树形结构的列名\n * @param {Set<Key>} expandedKeys : 展开的行对应的keys\n * @param {GetRowKey<T>} getRowKey  : 获取当前rowKey的方法\n * @returns flattened data\n */\nexport default function useFlattenRecords(data, childrenColumnName, expandedKeys, getRowKey) {\n  var arr = React.useMemo(function () {\n    if (expandedKeys !== null && expandedKeys !== void 0 && expandedKeys.size) {\n      var list = [];\n\n      // collect flattened record\n      for (var i = 0; i < (data === null || data === void 0 ? void 0 : data.length); i += 1) {\n        var record = data[i];\n\n        // using array.push or spread operator may cause \"Maximum call stack size exceeded\" exception if array size is big enough.\n        fillRecords(list, record, 0, childrenColumnName, expandedKeys, getRowKey, i);\n      }\n      return list;\n    }\n    return data === null || data === void 0 ? void 0 : data.map(function (item, index) {\n      return {\n        record: item,\n        indent: 0,\n        index: index\n      };\n    });\n  }, [data, childrenColumnName, expandedKeys, getRowKey]);\n  return arr;\n}"]},"metadata":{},"sourceType":"module"}