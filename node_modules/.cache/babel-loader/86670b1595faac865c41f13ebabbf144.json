{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"src\", \"alt\", \"onPreviewClose\", \"prefixCls\", \"previewPrefixCls\", \"placeholder\", \"fallback\", \"width\", \"height\", \"style\", \"preview\", \"className\", \"onClick\", \"onError\", \"wrapperClassName\", \"wrapperStyle\", \"rootClassName\"],\n    _excluded2 = [\"src\", \"visible\", \"onVisibleChange\", \"getContainer\", \"mask\", \"maskClassName\", \"movable\", \"icons\", \"scaleStep\", \"minScale\", \"maxScale\", \"imageRender\", \"toolbarRender\"];\nimport cn from 'classnames';\nimport { getOffset } from \"rc-util/es/Dom/css\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport { useContext, useMemo, useState } from 'react';\nimport { COMMON_PROPS } from \"./common\";\nimport { PreviewGroupContext } from \"./context\";\nimport useRegisterImage from \"./hooks/useRegisterImage\";\nimport useStatus from \"./hooks/useStatus\";\nimport Preview from \"./Preview\";\nimport PreviewGroup from \"./PreviewGroup\";\n\nvar ImageInternal = function ImageInternal(props) {\n  var imgSrc = props.src,\n      alt = props.alt,\n      onInitialPreviewClose = props.onPreviewClose,\n      _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-image' : _props$prefixCls,\n      _props$previewPrefixC = props.previewPrefixCls,\n      previewPrefixCls = _props$previewPrefixC === void 0 ? \"\".concat(prefixCls, \"-preview\") : _props$previewPrefixC,\n      placeholder = props.placeholder,\n      fallback = props.fallback,\n      width = props.width,\n      height = props.height,\n      style = props.style,\n      _props$preview = props.preview,\n      preview = _props$preview === void 0 ? true : _props$preview,\n      className = props.className,\n      onClick = props.onClick,\n      onError = props.onError,\n      wrapperClassName = props.wrapperClassName,\n      wrapperStyle = props.wrapperStyle,\n      rootClassName = props.rootClassName,\n      otherProps = _objectWithoutProperties(props, _excluded);\n\n  var isCustomPlaceholder = placeholder && placeholder !== true;\n\n  var _ref = _typeof(preview) === 'object' ? preview : {},\n      previewSrc = _ref.src,\n      _ref$visible = _ref.visible,\n      previewVisible = _ref$visible === void 0 ? undefined : _ref$visible,\n      _ref$onVisibleChange = _ref.onVisibleChange,\n      onPreviewVisibleChange = _ref$onVisibleChange === void 0 ? onInitialPreviewClose : _ref$onVisibleChange,\n      _ref$getContainer = _ref.getContainer,\n      getPreviewContainer = _ref$getContainer === void 0 ? undefined : _ref$getContainer,\n      previewMask = _ref.mask,\n      maskClassName = _ref.maskClassName,\n      movable = _ref.movable,\n      icons = _ref.icons,\n      scaleStep = _ref.scaleStep,\n      minScale = _ref.minScale,\n      maxScale = _ref.maxScale,\n      imageRender = _ref.imageRender,\n      toolbarRender = _ref.toolbarRender,\n      dialogProps = _objectWithoutProperties(_ref, _excluded2);\n\n  var src = previewSrc !== null && previewSrc !== void 0 ? previewSrc : imgSrc;\n\n  var _useMergedState = useMergedState(!!previewVisible, {\n    value: previewVisible,\n    onChange: onPreviewVisibleChange\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      isShowPreview = _useMergedState2[0],\n      setShowPreview = _useMergedState2[1];\n\n  var _useStatus = useStatus({\n    src: imgSrc,\n    isCustomPlaceholder: isCustomPlaceholder,\n    fallback: fallback\n  }),\n      _useStatus2 = _slicedToArray(_useStatus, 3),\n      getImgRef = _useStatus2[0],\n      srcAndOnload = _useStatus2[1],\n      status = _useStatus2[2];\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      mousePosition = _useState2[0],\n      setMousePosition = _useState2[1];\n\n  var groupContext = useContext(PreviewGroupContext);\n  var canPreview = !!preview;\n\n  var onPreviewClose = function onPreviewClose() {\n    setShowPreview(false);\n    setMousePosition(null);\n  };\n\n  var wrapperClass = cn(prefixCls, wrapperClassName, rootClassName, _defineProperty({}, \"\".concat(prefixCls, \"-error\"), status === 'error')); // ========================= ImageProps =========================\n\n  var imgCommonProps = useMemo(function () {\n    var obj = {};\n    COMMON_PROPS.forEach(function (prop) {\n      if (props[prop] !== undefined) {\n        obj[prop] = props[prop];\n      }\n    });\n    return obj;\n  }, COMMON_PROPS.map(function (prop) {\n    return props[prop];\n  })); // ========================== Register ==========================\n\n  var registerData = useMemo(function () {\n    return _objectSpread(_objectSpread({}, imgCommonProps), {}, {\n      src: src\n    });\n  }, [src, imgCommonProps]);\n  var imageId = useRegisterImage(canPreview, registerData); // ========================== Preview ===========================\n\n  var onPreview = function onPreview(e) {\n    var _getOffset = getOffset(e.target),\n        left = _getOffset.left,\n        top = _getOffset.top;\n\n    if (groupContext) {\n      groupContext.onPreview(imageId, left, top);\n    } else {\n      setMousePosition({\n        x: left,\n        y: top\n      });\n      setShowPreview(true);\n    }\n\n    onClick === null || onClick === void 0 || onClick(e);\n  }; // =========================== Render ===========================\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", _extends({}, otherProps, {\n    className: wrapperClass,\n    onClick: canPreview ? onPreview : onClick,\n    style: _objectSpread({\n      width: width,\n      height: height\n    }, wrapperStyle)\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({}, imgCommonProps, {\n    className: cn(\"\".concat(prefixCls, \"-img\"), _defineProperty({}, \"\".concat(prefixCls, \"-img-placeholder\"), placeholder === true), className),\n    style: _objectSpread({\n      height: height\n    }, style),\n    ref: getImgRef\n  }, srcAndOnload, {\n    width: width,\n    height: height,\n    onError: onError\n  })), status === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-placeholder\")\n  }, placeholder), previewMask && canPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: cn(\"\".concat(prefixCls, \"-mask\"), maskClassName),\n    style: {\n      display: (style === null || style === void 0 ? void 0 : style.display) === 'none' ? 'none' : undefined\n    }\n  }, previewMask)), !groupContext && canPreview && /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: src,\n    alt: alt,\n    fallback: fallback,\n    getContainer: getPreviewContainer,\n    icons: icons,\n    movable: movable,\n    scaleStep: scaleStep,\n    minScale: minScale,\n    maxScale: maxScale,\n    rootClassName: rootClassName,\n    imageRender: imageRender,\n    imgCommonProps: imgCommonProps,\n    toolbarRender: toolbarRender\n  }, dialogProps)));\n};\n\nImageInternal.PreviewGroup = PreviewGroup;\nImageInternal.displayName = 'Image';\nexport default ImageInternal;","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Music/node_modules/rc-image/es/Image.js"],"names":["_extends","_objectSpread","_defineProperty","_slicedToArray","_typeof","_objectWithoutProperties","_excluded","_excluded2","cn","getOffset","useMergedState","React","useContext","useMemo","useState","COMMON_PROPS","PreviewGroupContext","useRegisterImage","useStatus","Preview","PreviewGroup","ImageInternal","props","imgSrc","src","alt","onInitialPreviewClose","onPreviewClose","_props$prefixCls","prefixCls","_props$previewPrefixC","previewPrefixCls","concat","placeholder","fallback","width","height","style","_props$preview","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","otherProps","isCustomPlaceholder","_ref","previewSrc","_ref$visible","visible","previewVisible","undefined","_ref$onVisibleChange","onVisibleChange","onPreviewVisibleChange","_ref$getContainer","getContainer","getPreviewContainer","previewMask","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender","dialogProps","_useMergedState","value","onChange","_useMergedState2","isShowPreview","setShowPreview","_useStatus","_useStatus2","getImgRef","srcAndOnload","status","_useState","_useState2","mousePosition","setMousePosition","groupContext","canPreview","wrapperClass","imgCommonProps","obj","forEach","prop","map","registerData","imageId","onPreview","e","_getOffset","target","left","top","x","y","createElement","Fragment","ref","display","onClose","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"src\", \"alt\", \"onPreviewClose\", \"prefixCls\", \"previewPrefixCls\", \"placeholder\", \"fallback\", \"width\", \"height\", \"style\", \"preview\", \"className\", \"onClick\", \"onError\", \"wrapperClassName\", \"wrapperStyle\", \"rootClassName\"],\n  _excluded2 = [\"src\", \"visible\", \"onVisibleChange\", \"getContainer\", \"mask\", \"maskClassName\", \"movable\", \"icons\", \"scaleStep\", \"minScale\", \"maxScale\", \"imageRender\", \"toolbarRender\"];\nimport cn from 'classnames';\nimport { getOffset } from \"rc-util/es/Dom/css\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport { useContext, useMemo, useState } from 'react';\nimport { COMMON_PROPS } from \"./common\";\nimport { PreviewGroupContext } from \"./context\";\nimport useRegisterImage from \"./hooks/useRegisterImage\";\nimport useStatus from \"./hooks/useStatus\";\nimport Preview from \"./Preview\";\nimport PreviewGroup from \"./PreviewGroup\";\nvar ImageInternal = function ImageInternal(props) {\n  var imgSrc = props.src,\n    alt = props.alt,\n    onInitialPreviewClose = props.onPreviewClose,\n    _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-image' : _props$prefixCls,\n    _props$previewPrefixC = props.previewPrefixCls,\n    previewPrefixCls = _props$previewPrefixC === void 0 ? \"\".concat(prefixCls, \"-preview\") : _props$previewPrefixC,\n    placeholder = props.placeholder,\n    fallback = props.fallback,\n    width = props.width,\n    height = props.height,\n    style = props.style,\n    _props$preview = props.preview,\n    preview = _props$preview === void 0 ? true : _props$preview,\n    className = props.className,\n    onClick = props.onClick,\n    onError = props.onError,\n    wrapperClassName = props.wrapperClassName,\n    wrapperStyle = props.wrapperStyle,\n    rootClassName = props.rootClassName,\n    otherProps = _objectWithoutProperties(props, _excluded);\n  var isCustomPlaceholder = placeholder && placeholder !== true;\n  var _ref = _typeof(preview) === 'object' ? preview : {},\n    previewSrc = _ref.src,\n    _ref$visible = _ref.visible,\n    previewVisible = _ref$visible === void 0 ? undefined : _ref$visible,\n    _ref$onVisibleChange = _ref.onVisibleChange,\n    onPreviewVisibleChange = _ref$onVisibleChange === void 0 ? onInitialPreviewClose : _ref$onVisibleChange,\n    _ref$getContainer = _ref.getContainer,\n    getPreviewContainer = _ref$getContainer === void 0 ? undefined : _ref$getContainer,\n    previewMask = _ref.mask,\n    maskClassName = _ref.maskClassName,\n    movable = _ref.movable,\n    icons = _ref.icons,\n    scaleStep = _ref.scaleStep,\n    minScale = _ref.minScale,\n    maxScale = _ref.maxScale,\n    imageRender = _ref.imageRender,\n    toolbarRender = _ref.toolbarRender,\n    dialogProps = _objectWithoutProperties(_ref, _excluded2);\n  var src = previewSrc !== null && previewSrc !== void 0 ? previewSrc : imgSrc;\n  var _useMergedState = useMergedState(!!previewVisible, {\n      value: previewVisible,\n      onChange: onPreviewVisibleChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    isShowPreview = _useMergedState2[0],\n    setShowPreview = _useMergedState2[1];\n  var _useStatus = useStatus({\n      src: imgSrc,\n      isCustomPlaceholder: isCustomPlaceholder,\n      fallback: fallback\n    }),\n    _useStatus2 = _slicedToArray(_useStatus, 3),\n    getImgRef = _useStatus2[0],\n    srcAndOnload = _useStatus2[1],\n    status = _useStatus2[2];\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    mousePosition = _useState2[0],\n    setMousePosition = _useState2[1];\n  var groupContext = useContext(PreviewGroupContext);\n  var canPreview = !!preview;\n  var onPreviewClose = function onPreviewClose() {\n    setShowPreview(false);\n    setMousePosition(null);\n  };\n  var wrapperClass = cn(prefixCls, wrapperClassName, rootClassName, _defineProperty({}, \"\".concat(prefixCls, \"-error\"), status === 'error'));\n\n  // ========================= ImageProps =========================\n  var imgCommonProps = useMemo(function () {\n    var obj = {};\n    COMMON_PROPS.forEach(function (prop) {\n      if (props[prop] !== undefined) {\n        obj[prop] = props[prop];\n      }\n    });\n    return obj;\n  }, COMMON_PROPS.map(function (prop) {\n    return props[prop];\n  }));\n\n  // ========================== Register ==========================\n  var registerData = useMemo(function () {\n    return _objectSpread(_objectSpread({}, imgCommonProps), {}, {\n      src: src\n    });\n  }, [src, imgCommonProps]);\n  var imageId = useRegisterImage(canPreview, registerData);\n\n  // ========================== Preview ===========================\n  var onPreview = function onPreview(e) {\n    var _getOffset = getOffset(e.target),\n      left = _getOffset.left,\n      top = _getOffset.top;\n    if (groupContext) {\n      groupContext.onPreview(imageId, left, top);\n    } else {\n      setMousePosition({\n        x: left,\n        y: top\n      });\n      setShowPreview(true);\n    }\n    onClick === null || onClick === void 0 || onClick(e);\n  };\n\n  // =========================== Render ===========================\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", _extends({}, otherProps, {\n    className: wrapperClass,\n    onClick: canPreview ? onPreview : onClick,\n    style: _objectSpread({\n      width: width,\n      height: height\n    }, wrapperStyle)\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({}, imgCommonProps, {\n    className: cn(\"\".concat(prefixCls, \"-img\"), _defineProperty({}, \"\".concat(prefixCls, \"-img-placeholder\"), placeholder === true), className),\n    style: _objectSpread({\n      height: height\n    }, style),\n    ref: getImgRef\n  }, srcAndOnload, {\n    width: width,\n    height: height,\n    onError: onError\n  })), status === 'loading' && /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(prefixCls, \"-placeholder\")\n  }, placeholder), previewMask && canPreview && /*#__PURE__*/React.createElement(\"div\", {\n    className: cn(\"\".concat(prefixCls, \"-mask\"), maskClassName),\n    style: {\n      display: (style === null || style === void 0 ? void 0 : style.display) === 'none' ? 'none' : undefined\n    }\n  }, previewMask)), !groupContext && canPreview && /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    visible: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    src: src,\n    alt: alt,\n    fallback: fallback,\n    getContainer: getPreviewContainer,\n    icons: icons,\n    movable: movable,\n    scaleStep: scaleStep,\n    minScale: minScale,\n    maxScale: maxScale,\n    rootClassName: rootClassName,\n    imageRender: imageRender,\n    imgCommonProps: imgCommonProps,\n    toolbarRender: toolbarRender\n  }, dialogProps)));\n};\nImageInternal.PreviewGroup = PreviewGroup;\nImageInternal.displayName = 'Image';\nexport default ImageInternal;"]},"metadata":{},"sourceType":"module"}