{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"className\", \"style\", \"classNames\", \"styles\"];\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport clsx from 'classnames';\nimport { CSSMotionList } from 'rc-motion';\nimport Notice from \"./Notice\";\nimport { NotificationContext } from \"./NotificationProvider\";\nimport useStack from \"./hooks/useStack\";\n\nvar NoticeList = function NoticeList(props) {\n  var configList = props.configList,\n      placement = props.placement,\n      prefixCls = props.prefixCls,\n      className = props.className,\n      style = props.style,\n      motion = props.motion,\n      onAllNoticeRemoved = props.onAllNoticeRemoved,\n      onNoticeClose = props.onNoticeClose,\n      stackConfig = props.stack;\n\n  var _useContext = useContext(NotificationContext),\n      ctxCls = _useContext.classNames;\n\n  var dictRef = useRef({});\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      latestNotice = _useState2[0],\n      setLatestNotice = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hoverKeys = _useState4[0],\n      setHoverKeys = _useState4[1];\n\n  var keys = configList.map(function (config) {\n    return {\n      config: config,\n      key: String(config.key)\n    };\n  });\n\n  var _useStack = useStack(stackConfig),\n      _useStack2 = _slicedToArray(_useStack, 2),\n      stack = _useStack2[0],\n      _useStack2$ = _useStack2[1],\n      offset = _useStack2$.offset,\n      threshold = _useStack2$.threshold,\n      gap = _useStack2$.gap;\n\n  var expanded = stack && (hoverKeys.length > 0 || keys.length <= threshold);\n  var placementMotion = typeof motion === 'function' ? motion(placement) : motion; // Clean hover key\n\n  useEffect(function () {\n    if (stack && hoverKeys.length > 1) {\n      setHoverKeys(function (prev) {\n        return prev.filter(function (key) {\n          return keys.some(function (_ref) {\n            var dataKey = _ref.key;\n            return key === dataKey;\n          });\n        });\n      });\n    }\n  }, [hoverKeys, keys, stack]); // Force update latest notice\n\n  useEffect(function () {\n    var _keys;\n\n    if (stack && dictRef.current[(_keys = keys[keys.length - 1]) === null || _keys === void 0 ? void 0 : _keys.key]) {\n      var _keys2;\n\n      setLatestNotice(dictRef.current[(_keys2 = keys[keys.length - 1]) === null || _keys2 === void 0 ? void 0 : _keys2.key]);\n    }\n  }, [keys, stack]);\n  return /*#__PURE__*/React.createElement(CSSMotionList, _extends({\n    key: placement,\n    className: clsx(prefixCls, \"\".concat(prefixCls, \"-\").concat(placement), ctxCls === null || ctxCls === void 0 ? void 0 : ctxCls.list, className, _defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-stack\"), !!stack), \"\".concat(prefixCls, \"-stack-expanded\"), expanded)),\n    style: style,\n    keys: keys,\n    motionAppear: true\n  }, placementMotion, {\n    onAllRemoved: function onAllRemoved() {\n      onAllNoticeRemoved(placement);\n    }\n  }), function (_ref2, nodeRef) {\n    var config = _ref2.config,\n        motionClassName = _ref2.className,\n        motionStyle = _ref2.style,\n        motionIndex = _ref2.index;\n    var _ref3 = config,\n        key = _ref3.key,\n        times = _ref3.times;\n    var strKey = String(key);\n\n    var _ref4 = config,\n        configClassName = _ref4.className,\n        configStyle = _ref4.style,\n        configClassNames = _ref4.classNames,\n        configStyles = _ref4.styles,\n        restConfig = _objectWithoutProperties(_ref4, _excluded);\n\n    var dataIndex = keys.findIndex(function (item) {\n      return item.key === strKey;\n    }); // If dataIndex is -1, that means this notice has been removed in data, but still in dom\n    // Should minus (motionIndex - 1) to get the correct index because keys.length is not the same as dom length\n\n    var stackStyle = {};\n\n    if (stack) {\n      var index = keys.length - 1 - (dataIndex > -1 ? dataIndex : motionIndex - 1);\n      var transformX = placement === 'top' || placement === 'bottom' ? '-50%' : '0';\n\n      if (index > 0) {\n        var _dictRef$current$strK, _dictRef$current$strK2, _dictRef$current$strK3;\n\n        stackStyle.height = expanded ? (_dictRef$current$strK = dictRef.current[strKey]) === null || _dictRef$current$strK === void 0 ? void 0 : _dictRef$current$strK.offsetHeight : latestNotice === null || latestNotice === void 0 ? void 0 : latestNotice.offsetHeight; // Transform\n\n        var verticalOffset = 0;\n\n        for (var i = 0; i < index; i++) {\n          var _dictRef$current$keys;\n\n          verticalOffset += ((_dictRef$current$keys = dictRef.current[keys[keys.length - 1 - i].key]) === null || _dictRef$current$keys === void 0 ? void 0 : _dictRef$current$keys.offsetHeight) + gap;\n        }\n\n        var transformY = (expanded ? verticalOffset : index * offset) * (placement.startsWith('top') ? 1 : -1);\n        var scaleX = !expanded && latestNotice !== null && latestNotice !== void 0 && latestNotice.offsetWidth && (_dictRef$current$strK2 = dictRef.current[strKey]) !== null && _dictRef$current$strK2 !== void 0 && _dictRef$current$strK2.offsetWidth ? ((latestNotice === null || latestNotice === void 0 ? void 0 : latestNotice.offsetWidth) - offset * 2 * (index < 3 ? index : 3)) / ((_dictRef$current$strK3 = dictRef.current[strKey]) === null || _dictRef$current$strK3 === void 0 ? void 0 : _dictRef$current$strK3.offsetWidth) : 1;\n        stackStyle.transform = \"translate3d(\".concat(transformX, \", \").concat(transformY, \"px, 0) scaleX(\").concat(scaleX, \")\");\n      } else {\n        stackStyle.transform = \"translate3d(\".concat(transformX, \", 0, 0)\");\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: nodeRef,\n      className: clsx(\"\".concat(prefixCls, \"-notice-wrapper\"), motionClassName, configClassNames === null || configClassNames === void 0 ? void 0 : configClassNames.wrapper),\n      style: _objectSpread(_objectSpread(_objectSpread({}, motionStyle), stackStyle), configStyles === null || configStyles === void 0 ? void 0 : configStyles.wrapper),\n      onMouseEnter: function onMouseEnter() {\n        return setHoverKeys(function (prev) {\n          return prev.includes(strKey) ? prev : [].concat(_toConsumableArray(prev), [strKey]);\n        });\n      },\n      onMouseLeave: function onMouseLeave() {\n        return setHoverKeys(function (prev) {\n          return prev.filter(function (k) {\n            return k !== strKey;\n          });\n        });\n      }\n    }, /*#__PURE__*/React.createElement(Notice, _extends({}, restConfig, {\n      ref: function ref(node) {\n        if (dataIndex > -1) {\n          dictRef.current[strKey] = node;\n        } else {\n          delete dictRef.current[strKey];\n        }\n      },\n      prefixCls: prefixCls,\n      classNames: configClassNames,\n      styles: configStyles,\n      className: clsx(configClassName, ctxCls === null || ctxCls === void 0 ? void 0 : ctxCls.notice),\n      style: configStyle,\n      times: times,\n      key: key,\n      eventKey: key,\n      onNoticeClose: onNoticeClose,\n      hovering: stack && hoverKeys.length > 0\n    })));\n  });\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  NoticeList.displayName = 'NoticeList';\n}\n\nexport default NoticeList;","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Music/node_modules/rc-notification/es/NoticeList.js"],"names":["_extends","_toConsumableArray","_objectSpread","_objectWithoutProperties","_defineProperty","_slicedToArray","_excluded","React","useContext","useEffect","useRef","useState","clsx","CSSMotionList","Notice","NotificationContext","useStack","NoticeList","props","configList","placement","prefixCls","className","style","motion","onAllNoticeRemoved","onNoticeClose","stackConfig","stack","_useContext","ctxCls","classNames","dictRef","_useState","_useState2","latestNotice","setLatestNotice","_useState3","_useState4","hoverKeys","setHoverKeys","keys","map","config","key","String","_useStack","_useStack2","_useStack2$","offset","threshold","gap","expanded","length","placementMotion","prev","filter","some","_ref","dataKey","_keys","current","_keys2","createElement","concat","list","motionAppear","onAllRemoved","_ref2","nodeRef","motionClassName","motionStyle","motionIndex","index","_ref3","times","strKey","_ref4","configClassName","configStyle","configClassNames","configStyles","styles","restConfig","dataIndex","findIndex","item","stackStyle","transformX","_dictRef$current$strK","_dictRef$current$strK2","_dictRef$current$strK3","height","offsetHeight","verticalOffset","i","_dictRef$current$keys","transformY","startsWith","scaleX","offsetWidth","transform","ref","wrapper","onMouseEnter","includes","onMouseLeave","k","node","notice","eventKey","hovering","process","env","NODE_ENV","displayName"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"className\", \"style\", \"classNames\", \"styles\"];\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport clsx from 'classnames';\nimport { CSSMotionList } from 'rc-motion';\nimport Notice from \"./Notice\";\nimport { NotificationContext } from \"./NotificationProvider\";\nimport useStack from \"./hooks/useStack\";\nvar NoticeList = function NoticeList(props) {\n  var configList = props.configList,\n    placement = props.placement,\n    prefixCls = props.prefixCls,\n    className = props.className,\n    style = props.style,\n    motion = props.motion,\n    onAllNoticeRemoved = props.onAllNoticeRemoved,\n    onNoticeClose = props.onNoticeClose,\n    stackConfig = props.stack;\n  var _useContext = useContext(NotificationContext),\n    ctxCls = _useContext.classNames;\n  var dictRef = useRef({});\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    latestNotice = _useState2[0],\n    setLatestNotice = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hoverKeys = _useState4[0],\n    setHoverKeys = _useState4[1];\n  var keys = configList.map(function (config) {\n    return {\n      config: config,\n      key: String(config.key)\n    };\n  });\n  var _useStack = useStack(stackConfig),\n    _useStack2 = _slicedToArray(_useStack, 2),\n    stack = _useStack2[0],\n    _useStack2$ = _useStack2[1],\n    offset = _useStack2$.offset,\n    threshold = _useStack2$.threshold,\n    gap = _useStack2$.gap;\n  var expanded = stack && (hoverKeys.length > 0 || keys.length <= threshold);\n  var placementMotion = typeof motion === 'function' ? motion(placement) : motion;\n\n  // Clean hover key\n  useEffect(function () {\n    if (stack && hoverKeys.length > 1) {\n      setHoverKeys(function (prev) {\n        return prev.filter(function (key) {\n          return keys.some(function (_ref) {\n            var dataKey = _ref.key;\n            return key === dataKey;\n          });\n        });\n      });\n    }\n  }, [hoverKeys, keys, stack]);\n\n  // Force update latest notice\n  useEffect(function () {\n    var _keys;\n    if (stack && dictRef.current[(_keys = keys[keys.length - 1]) === null || _keys === void 0 ? void 0 : _keys.key]) {\n      var _keys2;\n      setLatestNotice(dictRef.current[(_keys2 = keys[keys.length - 1]) === null || _keys2 === void 0 ? void 0 : _keys2.key]);\n    }\n  }, [keys, stack]);\n  return /*#__PURE__*/React.createElement(CSSMotionList, _extends({\n    key: placement,\n    className: clsx(prefixCls, \"\".concat(prefixCls, \"-\").concat(placement), ctxCls === null || ctxCls === void 0 ? void 0 : ctxCls.list, className, _defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-stack\"), !!stack), \"\".concat(prefixCls, \"-stack-expanded\"), expanded)),\n    style: style,\n    keys: keys,\n    motionAppear: true\n  }, placementMotion, {\n    onAllRemoved: function onAllRemoved() {\n      onAllNoticeRemoved(placement);\n    }\n  }), function (_ref2, nodeRef) {\n    var config = _ref2.config,\n      motionClassName = _ref2.className,\n      motionStyle = _ref2.style,\n      motionIndex = _ref2.index;\n    var _ref3 = config,\n      key = _ref3.key,\n      times = _ref3.times;\n    var strKey = String(key);\n    var _ref4 = config,\n      configClassName = _ref4.className,\n      configStyle = _ref4.style,\n      configClassNames = _ref4.classNames,\n      configStyles = _ref4.styles,\n      restConfig = _objectWithoutProperties(_ref4, _excluded);\n    var dataIndex = keys.findIndex(function (item) {\n      return item.key === strKey;\n    });\n\n    // If dataIndex is -1, that means this notice has been removed in data, but still in dom\n    // Should minus (motionIndex - 1) to get the correct index because keys.length is not the same as dom length\n    var stackStyle = {};\n    if (stack) {\n      var index = keys.length - 1 - (dataIndex > -1 ? dataIndex : motionIndex - 1);\n      var transformX = placement === 'top' || placement === 'bottom' ? '-50%' : '0';\n      if (index > 0) {\n        var _dictRef$current$strK, _dictRef$current$strK2, _dictRef$current$strK3;\n        stackStyle.height = expanded ? (_dictRef$current$strK = dictRef.current[strKey]) === null || _dictRef$current$strK === void 0 ? void 0 : _dictRef$current$strK.offsetHeight : latestNotice === null || latestNotice === void 0 ? void 0 : latestNotice.offsetHeight;\n\n        // Transform\n        var verticalOffset = 0;\n        for (var i = 0; i < index; i++) {\n          var _dictRef$current$keys;\n          verticalOffset += ((_dictRef$current$keys = dictRef.current[keys[keys.length - 1 - i].key]) === null || _dictRef$current$keys === void 0 ? void 0 : _dictRef$current$keys.offsetHeight) + gap;\n        }\n        var transformY = (expanded ? verticalOffset : index * offset) * (placement.startsWith('top') ? 1 : -1);\n        var scaleX = !expanded && latestNotice !== null && latestNotice !== void 0 && latestNotice.offsetWidth && (_dictRef$current$strK2 = dictRef.current[strKey]) !== null && _dictRef$current$strK2 !== void 0 && _dictRef$current$strK2.offsetWidth ? ((latestNotice === null || latestNotice === void 0 ? void 0 : latestNotice.offsetWidth) - offset * 2 * (index < 3 ? index : 3)) / ((_dictRef$current$strK3 = dictRef.current[strKey]) === null || _dictRef$current$strK3 === void 0 ? void 0 : _dictRef$current$strK3.offsetWidth) : 1;\n        stackStyle.transform = \"translate3d(\".concat(transformX, \", \").concat(transformY, \"px, 0) scaleX(\").concat(scaleX, \")\");\n      } else {\n        stackStyle.transform = \"translate3d(\".concat(transformX, \", 0, 0)\");\n      }\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: nodeRef,\n      className: clsx(\"\".concat(prefixCls, \"-notice-wrapper\"), motionClassName, configClassNames === null || configClassNames === void 0 ? void 0 : configClassNames.wrapper),\n      style: _objectSpread(_objectSpread(_objectSpread({}, motionStyle), stackStyle), configStyles === null || configStyles === void 0 ? void 0 : configStyles.wrapper),\n      onMouseEnter: function onMouseEnter() {\n        return setHoverKeys(function (prev) {\n          return prev.includes(strKey) ? prev : [].concat(_toConsumableArray(prev), [strKey]);\n        });\n      },\n      onMouseLeave: function onMouseLeave() {\n        return setHoverKeys(function (prev) {\n          return prev.filter(function (k) {\n            return k !== strKey;\n          });\n        });\n      }\n    }, /*#__PURE__*/React.createElement(Notice, _extends({}, restConfig, {\n      ref: function ref(node) {\n        if (dataIndex > -1) {\n          dictRef.current[strKey] = node;\n        } else {\n          delete dictRef.current[strKey];\n        }\n      },\n      prefixCls: prefixCls,\n      classNames: configClassNames,\n      styles: configStyles,\n      className: clsx(configClassName, ctxCls === null || ctxCls === void 0 ? void 0 : ctxCls.notice),\n      style: configStyle,\n      times: times,\n      key: key,\n      eventKey: key,\n      onNoticeClose: onNoticeClose,\n      hovering: stack && hoverKeys.length > 0\n    })));\n  });\n};\nif (process.env.NODE_ENV !== 'production') {\n  NoticeList.displayName = 'NoticeList';\n}\nexport default NoticeList;"]},"metadata":{},"sourceType":"module"}