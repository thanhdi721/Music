{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { supportRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\n/**\n * Create Immutable pair for `makeImmutable` and `responseImmutable`.\n */\n\nexport default function createImmutable() {\n  var ImmutableContext = /*#__PURE__*/React.createContext(null);\n  /**\n   * Get render update mark by `makeImmutable` root.\n   * Do not deps on the return value as render times\n   * but only use for `useMemo` or `useCallback` deps.\n   */\n\n  function useImmutableMark() {\n    return React.useContext(ImmutableContext);\n  }\n  /**\n  * Wrapped Component will be marked as Immutable.\n  * When Component parent trigger render,\n  * it will notice children component (use with `responseImmutable`) node that parent has updated.\n  * @param Component Passed Component\n  * @param triggerRender Customize trigger `responseImmutable` children re-render logic. Default will always trigger re-render when this component re-render.\n  */\n\n\n  function makeImmutable(Component, shouldTriggerRender) {\n    var refAble = supportRef(Component);\n\n    var ImmutableComponent = function ImmutableComponent(props, ref) {\n      var refProps = refAble ? {\n        ref: ref\n      } : {};\n      var renderTimesRef = React.useRef(0);\n      var prevProps = React.useRef(props); // If parent has the context, we do not wrap it\n\n      var mark = useImmutableMark();\n\n      if (mark !== null) {\n        return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n      }\n\n      if ( // Always trigger re-render if not provide `notTriggerRender`\n      !shouldTriggerRender || shouldTriggerRender(prevProps.current, props)) {\n        renderTimesRef.current += 1;\n      }\n\n      prevProps.current = props;\n      return /*#__PURE__*/React.createElement(ImmutableContext.Provider, {\n        value: renderTimesRef.current\n      }, /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps)));\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableRoot(\".concat(Component.displayName || Component.name, \")\");\n    }\n\n    return refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent;\n  }\n  /**\n   * Wrapped Component with `React.memo`.\n   * But will rerender when parent with `makeImmutable` rerender.\n   */\n\n\n  function responseImmutable(Component, propsAreEqual) {\n    var refAble = supportRef(Component);\n\n    var ImmutableComponent = function ImmutableComponent(props, ref) {\n      var refProps = refAble ? {\n        ref: ref\n      } : {};\n      useImmutableMark();\n      return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableResponse(\".concat(Component.displayName || Component.name, \")\");\n    }\n\n    return refAble ? /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(ImmutableComponent), propsAreEqual) : /*#__PURE__*/React.memo(ImmutableComponent, propsAreEqual);\n  }\n\n  return {\n    makeImmutable: makeImmutable,\n    responseImmutable: responseImmutable,\n    useImmutableMark: useImmutableMark\n  };\n}","map":{"version":3,"sources":["D:/WED/SpotifyProject-master/node_modules/@rc-component/context/es/Immutable.js"],"names":["_extends","supportRef","React","createImmutable","ImmutableContext","createContext","useImmutableMark","useContext","makeImmutable","Component","shouldTriggerRender","refAble","ImmutableComponent","props","ref","refProps","renderTimesRef","useRef","prevProps","mark","createElement","current","Provider","value","process","env","NODE_ENV","displayName","concat","name","forwardRef","responseImmutable","propsAreEqual","memo"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { supportRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\n/**\n * Create Immutable pair for `makeImmutable` and `responseImmutable`.\n */\nexport default function createImmutable() {\n  var ImmutableContext = /*#__PURE__*/React.createContext(null);\n\n  /**\n   * Get render update mark by `makeImmutable` root.\n   * Do not deps on the return value as render times\n   * but only use for `useMemo` or `useCallback` deps.\n   */\n  function useImmutableMark() {\n    return React.useContext(ImmutableContext);\n  }\n\n  /**\n  * Wrapped Component will be marked as Immutable.\n  * When Component parent trigger render,\n  * it will notice children component (use with `responseImmutable`) node that parent has updated.\n  * @param Component Passed Component\n  * @param triggerRender Customize trigger `responseImmutable` children re-render logic. Default will always trigger re-render when this component re-render.\n  */\n  function makeImmutable(Component, shouldTriggerRender) {\n    var refAble = supportRef(Component);\n    var ImmutableComponent = function ImmutableComponent(props, ref) {\n      var refProps = refAble ? {\n        ref: ref\n      } : {};\n      var renderTimesRef = React.useRef(0);\n      var prevProps = React.useRef(props);\n\n      // If parent has the context, we do not wrap it\n      var mark = useImmutableMark();\n      if (mark !== null) {\n        return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n      }\n      if (\n      // Always trigger re-render if not provide `notTriggerRender`\n      !shouldTriggerRender || shouldTriggerRender(prevProps.current, props)) {\n        renderTimesRef.current += 1;\n      }\n      prevProps.current = props;\n      return /*#__PURE__*/React.createElement(ImmutableContext.Provider, {\n        value: renderTimesRef.current\n      }, /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps)));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableRoot(\".concat(Component.displayName || Component.name, \")\");\n    }\n    return refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent;\n  }\n\n  /**\n   * Wrapped Component with `React.memo`.\n   * But will rerender when parent with `makeImmutable` rerender.\n   */\n  function responseImmutable(Component, propsAreEqual) {\n    var refAble = supportRef(Component);\n    var ImmutableComponent = function ImmutableComponent(props, ref) {\n      var refProps = refAble ? {\n        ref: ref\n      } : {};\n      useImmutableMark();\n      return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableResponse(\".concat(Component.displayName || Component.name, \")\");\n    }\n    return refAble ? /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(ImmutableComponent), propsAreEqual) : /*#__PURE__*/React.memo(ImmutableComponent, propsAreEqual);\n  }\n  return {\n    makeImmutable: makeImmutable,\n    responseImmutable: responseImmutable,\n    useImmutableMark: useImmutableMark\n  };\n}"]},"metadata":{},"sourceType":"module"}