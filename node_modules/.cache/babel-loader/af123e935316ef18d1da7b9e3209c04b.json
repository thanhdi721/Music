{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"steps\", \"defaultCurrent\", \"current\", \"onChange\", \"onClose\", \"onFinish\", \"open\", \"mask\", \"arrow\", \"rootClassName\", \"placement\", \"renderPanel\", \"gap\", \"animated\", \"scrollIntoViewOptions\", \"zIndex\", \"closeIcon\", \"closable\", \"builtinPlacements\", \"disabledInteraction\"];\nimport * as React from 'react';\nimport Portal from '@rc-component/portal';\nimport Trigger from '@rc-component/trigger';\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport { useMemo } from 'react';\nimport { useClosable } from \"./hooks/useClosable\";\nimport useTarget from \"./hooks/useTarget\";\nimport Mask from \"./Mask\";\nimport { getPlacements } from \"./placements\";\nimport TourStep from \"./TourStep\";\nimport { getPlacement } from \"./util\";\nvar CENTER_PLACEHOLDER = {\n  left: '50%',\n  top: '50%',\n  width: 1,\n  height: 1\n};\nvar defaultScrollIntoViewOptions = {\n  block: 'center',\n  inline: 'center'\n};\n\nvar Tour = function Tour(props) {\n  var _props$prefixCls = props.prefixCls,\n      prefixCls = _props$prefixCls === void 0 ? 'rc-tour' : _props$prefixCls,\n      _props$steps = props.steps,\n      steps = _props$steps === void 0 ? [] : _props$steps,\n      defaultCurrent = props.defaultCurrent,\n      current = props.current,\n      onChange = props.onChange,\n      onClose = props.onClose,\n      _onFinish = props.onFinish,\n      open = props.open,\n      _props$mask = props.mask,\n      mask = _props$mask === void 0 ? true : _props$mask,\n      _props$arrow = props.arrow,\n      arrow = _props$arrow === void 0 ? true : _props$arrow,\n      rootClassName = props.rootClassName,\n      placement = props.placement,\n      renderPanel = props.renderPanel,\n      gap = props.gap,\n      animated = props.animated,\n      _props$scrollIntoView = props.scrollIntoViewOptions,\n      scrollIntoViewOptions = _props$scrollIntoView === void 0 ? defaultScrollIntoViewOptions : _props$scrollIntoView,\n      _props$zIndex = props.zIndex,\n      zIndex = _props$zIndex === void 0 ? 1001 : _props$zIndex,\n      closeIcon = props.closeIcon,\n      closable = props.closable,\n      builtinPlacements = props.builtinPlacements,\n      disabledInteraction = props.disabledInteraction,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var triggerRef = React.useRef();\n\n  var _useMergedState = useMergedState(0, {\n    value: current,\n    defaultValue: defaultCurrent\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedCurrent = _useMergedState2[0],\n      setMergedCurrent = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(undefined, {\n    value: open,\n    postState: function postState(origin) {\n      return mergedCurrent < 0 || mergedCurrent >= steps.length ? false : origin !== null && origin !== void 0 ? origin : true;\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      mergedOpen = _useMergedState4[0],\n      setMergedOpen = _useMergedState4[1];\n\n  var openRef = React.useRef(mergedOpen);\n  useLayoutEffect(function () {\n    if (mergedOpen && !openRef.current) {\n      setMergedCurrent(0);\n    }\n\n    openRef.current = mergedOpen;\n  }, [mergedOpen]);\n\n  var _ref = steps[mergedCurrent] || {},\n      target = _ref.target,\n      stepPlacement = _ref.placement,\n      stepStyle = _ref.style,\n      stepArrow = _ref.arrow,\n      stepClassName = _ref.className,\n      stepMask = _ref.mask,\n      _ref$scrollIntoViewOp = _ref.scrollIntoViewOptions,\n      stepScrollIntoViewOptions = _ref$scrollIntoViewOp === void 0 ? defaultScrollIntoViewOptions : _ref$scrollIntoViewOp,\n      stepCloseIcon = _ref.closeIcon,\n      stepClosable = _ref.closable;\n\n  var mergedClosable = useClosable(stepClosable, stepCloseIcon, closable, closeIcon);\n  var mergedMask = mergedOpen && (stepMask !== null && stepMask !== void 0 ? stepMask : mask);\n  var mergedScrollIntoViewOptions = stepScrollIntoViewOptions !== null && stepScrollIntoViewOptions !== void 0 ? stepScrollIntoViewOptions : scrollIntoViewOptions;\n\n  var _useTarget = useTarget(target, open, gap, mergedScrollIntoViewOptions),\n      _useTarget2 = _slicedToArray(_useTarget, 2),\n      posInfo = _useTarget2[0],\n      targetElement = _useTarget2[1];\n\n  var mergedPlacement = getPlacement(targetElement, placement, stepPlacement); // ========================= arrow =========================\n\n  var mergedArrow = targetElement ? typeof stepArrow === 'undefined' ? arrow : stepArrow : false;\n  var arrowPointAtCenter = _typeof(mergedArrow) === 'object' ? mergedArrow.pointAtCenter : false;\n  useLayoutEffect(function () {\n    var _triggerRef$current;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 || _triggerRef$current.forceAlign();\n  }, [arrowPointAtCenter, mergedCurrent]); // ========================= Change =========================\n\n  var onInternalChange = function onInternalChange(nextCurrent) {\n    setMergedCurrent(nextCurrent);\n    onChange === null || onChange === void 0 || onChange(nextCurrent);\n  };\n\n  var mergedBuiltinPlacements = useMemo(function () {\n    if (builtinPlacements) {\n      return typeof builtinPlacements === 'function' ? builtinPlacements({\n        arrowPointAtCenter: arrowPointAtCenter\n      }) : builtinPlacements;\n    }\n\n    return getPlacements(arrowPointAtCenter);\n  }, [builtinPlacements, arrowPointAtCenter]); // ========================= Render =========================\n  // Skip if not init yet\n\n  if (targetElement === undefined) {\n    return null;\n  }\n\n  var handleClose = function handleClose() {\n    setMergedOpen(false);\n    onClose === null || onClose === void 0 || onClose(mergedCurrent);\n  };\n\n  var getPopupElement = function getPopupElement() {\n    return /*#__PURE__*/React.createElement(TourStep, _extends({\n      arrow: mergedArrow,\n      key: \"content\",\n      prefixCls: prefixCls,\n      total: steps.length,\n      renderPanel: renderPanel,\n      onPrev: function onPrev() {\n        onInternalChange(mergedCurrent - 1);\n      },\n      onNext: function onNext() {\n        onInternalChange(mergedCurrent + 1);\n      },\n      onClose: handleClose,\n      current: mergedCurrent,\n      onFinish: function onFinish() {\n        handleClose();\n        _onFinish === null || _onFinish === void 0 || _onFinish();\n      }\n    }, steps[mergedCurrent], {\n      closable: mergedClosable\n    }));\n  };\n\n  var mergedShowMask = typeof mergedMask === 'boolean' ? mergedMask : !!mergedMask;\n  var mergedMaskStyle = typeof mergedMask === 'boolean' ? undefined : mergedMask; // when targetElement is not exist, use body as triggerDOMNode\n\n  var getTriggerDOMNode = function getTriggerDOMNode(node) {\n    return node || targetElement || document.body;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Mask, {\n    zIndex: zIndex,\n    prefixCls: prefixCls,\n    pos: posInfo,\n    showMask: mergedShowMask,\n    style: mergedMaskStyle === null || mergedMaskStyle === void 0 ? void 0 : mergedMaskStyle.style,\n    fill: mergedMaskStyle === null || mergedMaskStyle === void 0 ? void 0 : mergedMaskStyle.color,\n    open: mergedOpen,\n    animated: animated,\n    rootClassName: rootClassName,\n    disabledInteraction: disabledInteraction\n  }), /*#__PURE__*/React.createElement(Trigger, _extends({}, restProps, {\n    builtinPlacements: mergedBuiltinPlacements,\n    ref: triggerRef,\n    popupStyle: stepStyle,\n    popupPlacement: mergedPlacement,\n    popupVisible: mergedOpen,\n    popupClassName: classNames(rootClassName, stepClassName),\n    prefixCls: prefixCls,\n    popup: getPopupElement,\n    forceRender: false,\n    destroyPopupOnHide: true,\n    zIndex: zIndex,\n    getTriggerDOMNode: getTriggerDOMNode,\n    arrow: !!mergedArrow\n  }), /*#__PURE__*/React.createElement(Portal, {\n    open: mergedOpen,\n    autoLock: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(rootClassName, \"\".concat(prefixCls, \"-target-placeholder\")),\n    style: _objectSpread(_objectSpread({}, posInfo || CENTER_PLACEHOLDER), {}, {\n      position: 'fixed',\n      pointerEvents: 'none'\n    })\n  }))));\n};\n\nexport default Tour;","map":{"version":3,"sources":["D:/WED/SpotifyProject-master/node_modules/@rc-component/tour/es/Tour.js"],"names":["_objectSpread","_extends","_typeof","_slicedToArray","_objectWithoutProperties","_excluded","React","Portal","Trigger","classNames","useLayoutEffect","useMergedState","useMemo","useClosable","useTarget","Mask","getPlacements","TourStep","getPlacement","CENTER_PLACEHOLDER","left","top","width","height","defaultScrollIntoViewOptions","block","inline","Tour","props","_props$prefixCls","prefixCls","_props$steps","steps","defaultCurrent","current","onChange","onClose","_onFinish","onFinish","open","_props$mask","mask","_props$arrow","arrow","rootClassName","placement","renderPanel","gap","animated","_props$scrollIntoView","scrollIntoViewOptions","_props$zIndex","zIndex","closeIcon","closable","builtinPlacements","disabledInteraction","restProps","triggerRef","useRef","_useMergedState","value","defaultValue","_useMergedState2","mergedCurrent","setMergedCurrent","_useMergedState3","undefined","postState","origin","length","_useMergedState4","mergedOpen","setMergedOpen","openRef","_ref","target","stepPlacement","stepStyle","style","stepArrow","stepClassName","className","stepMask","_ref$scrollIntoViewOp","stepScrollIntoViewOptions","stepCloseIcon","stepClosable","mergedClosable","mergedMask","mergedScrollIntoViewOptions","_useTarget","_useTarget2","posInfo","targetElement","mergedPlacement","mergedArrow","arrowPointAtCenter","pointAtCenter","_triggerRef$current","forceAlign","onInternalChange","nextCurrent","mergedBuiltinPlacements","handleClose","getPopupElement","createElement","key","total","onPrev","onNext","mergedShowMask","mergedMaskStyle","getTriggerDOMNode","node","document","body","Fragment","pos","showMask","fill","color","ref","popupStyle","popupPlacement","popupVisible","popupClassName","popup","forceRender","destroyPopupOnHide","autoLock","concat","position","pointerEvents"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"steps\", \"defaultCurrent\", \"current\", \"onChange\", \"onClose\", \"onFinish\", \"open\", \"mask\", \"arrow\", \"rootClassName\", \"placement\", \"renderPanel\", \"gap\", \"animated\", \"scrollIntoViewOptions\", \"zIndex\", \"closeIcon\", \"closable\", \"builtinPlacements\", \"disabledInteraction\"];\nimport * as React from 'react';\nimport Portal from '@rc-component/portal';\nimport Trigger from '@rc-component/trigger';\nimport classNames from 'classnames';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport { useMemo } from 'react';\nimport { useClosable } from \"./hooks/useClosable\";\nimport useTarget from \"./hooks/useTarget\";\nimport Mask from \"./Mask\";\nimport { getPlacements } from \"./placements\";\nimport TourStep from \"./TourStep\";\nimport { getPlacement } from \"./util\";\nvar CENTER_PLACEHOLDER = {\n  left: '50%',\n  top: '50%',\n  width: 1,\n  height: 1\n};\nvar defaultScrollIntoViewOptions = {\n  block: 'center',\n  inline: 'center'\n};\nvar Tour = function Tour(props) {\n  var _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-tour' : _props$prefixCls,\n    _props$steps = props.steps,\n    steps = _props$steps === void 0 ? [] : _props$steps,\n    defaultCurrent = props.defaultCurrent,\n    current = props.current,\n    onChange = props.onChange,\n    onClose = props.onClose,\n    _onFinish = props.onFinish,\n    open = props.open,\n    _props$mask = props.mask,\n    mask = _props$mask === void 0 ? true : _props$mask,\n    _props$arrow = props.arrow,\n    arrow = _props$arrow === void 0 ? true : _props$arrow,\n    rootClassName = props.rootClassName,\n    placement = props.placement,\n    renderPanel = props.renderPanel,\n    gap = props.gap,\n    animated = props.animated,\n    _props$scrollIntoView = props.scrollIntoViewOptions,\n    scrollIntoViewOptions = _props$scrollIntoView === void 0 ? defaultScrollIntoViewOptions : _props$scrollIntoView,\n    _props$zIndex = props.zIndex,\n    zIndex = _props$zIndex === void 0 ? 1001 : _props$zIndex,\n    closeIcon = props.closeIcon,\n    closable = props.closable,\n    builtinPlacements = props.builtinPlacements,\n    disabledInteraction = props.disabledInteraction,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var triggerRef = React.useRef();\n  var _useMergedState = useMergedState(0, {\n      value: current,\n      defaultValue: defaultCurrent\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    mergedCurrent = _useMergedState2[0],\n    setMergedCurrent = _useMergedState2[1];\n  var _useMergedState3 = useMergedState(undefined, {\n      value: open,\n      postState: function postState(origin) {\n        return mergedCurrent < 0 || mergedCurrent >= steps.length ? false : origin !== null && origin !== void 0 ? origin : true;\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedOpen = _useMergedState4[0],\n    setMergedOpen = _useMergedState4[1];\n  var openRef = React.useRef(mergedOpen);\n  useLayoutEffect(function () {\n    if (mergedOpen && !openRef.current) {\n      setMergedCurrent(0);\n    }\n    openRef.current = mergedOpen;\n  }, [mergedOpen]);\n  var _ref = steps[mergedCurrent] || {},\n    target = _ref.target,\n    stepPlacement = _ref.placement,\n    stepStyle = _ref.style,\n    stepArrow = _ref.arrow,\n    stepClassName = _ref.className,\n    stepMask = _ref.mask,\n    _ref$scrollIntoViewOp = _ref.scrollIntoViewOptions,\n    stepScrollIntoViewOptions = _ref$scrollIntoViewOp === void 0 ? defaultScrollIntoViewOptions : _ref$scrollIntoViewOp,\n    stepCloseIcon = _ref.closeIcon,\n    stepClosable = _ref.closable;\n  var mergedClosable = useClosable(stepClosable, stepCloseIcon, closable, closeIcon);\n  var mergedMask = mergedOpen && (stepMask !== null && stepMask !== void 0 ? stepMask : mask);\n  var mergedScrollIntoViewOptions = stepScrollIntoViewOptions !== null && stepScrollIntoViewOptions !== void 0 ? stepScrollIntoViewOptions : scrollIntoViewOptions;\n  var _useTarget = useTarget(target, open, gap, mergedScrollIntoViewOptions),\n    _useTarget2 = _slicedToArray(_useTarget, 2),\n    posInfo = _useTarget2[0],\n    targetElement = _useTarget2[1];\n  var mergedPlacement = getPlacement(targetElement, placement, stepPlacement);\n\n  // ========================= arrow =========================\n  var mergedArrow = targetElement ? typeof stepArrow === 'undefined' ? arrow : stepArrow : false;\n  var arrowPointAtCenter = _typeof(mergedArrow) === 'object' ? mergedArrow.pointAtCenter : false;\n  useLayoutEffect(function () {\n    var _triggerRef$current;\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 || _triggerRef$current.forceAlign();\n  }, [arrowPointAtCenter, mergedCurrent]);\n\n  // ========================= Change =========================\n  var onInternalChange = function onInternalChange(nextCurrent) {\n    setMergedCurrent(nextCurrent);\n    onChange === null || onChange === void 0 || onChange(nextCurrent);\n  };\n  var mergedBuiltinPlacements = useMemo(function () {\n    if (builtinPlacements) {\n      return typeof builtinPlacements === 'function' ? builtinPlacements({\n        arrowPointAtCenter: arrowPointAtCenter\n      }) : builtinPlacements;\n    }\n    return getPlacements(arrowPointAtCenter);\n  }, [builtinPlacements, arrowPointAtCenter]);\n\n  // ========================= Render =========================\n  // Skip if not init yet\n  if (targetElement === undefined) {\n    return null;\n  }\n  var handleClose = function handleClose() {\n    setMergedOpen(false);\n    onClose === null || onClose === void 0 || onClose(mergedCurrent);\n  };\n  var getPopupElement = function getPopupElement() {\n    return /*#__PURE__*/React.createElement(TourStep, _extends({\n      arrow: mergedArrow,\n      key: \"content\",\n      prefixCls: prefixCls,\n      total: steps.length,\n      renderPanel: renderPanel,\n      onPrev: function onPrev() {\n        onInternalChange(mergedCurrent - 1);\n      },\n      onNext: function onNext() {\n        onInternalChange(mergedCurrent + 1);\n      },\n      onClose: handleClose,\n      current: mergedCurrent,\n      onFinish: function onFinish() {\n        handleClose();\n        _onFinish === null || _onFinish === void 0 || _onFinish();\n      }\n    }, steps[mergedCurrent], {\n      closable: mergedClosable\n    }));\n  };\n  var mergedShowMask = typeof mergedMask === 'boolean' ? mergedMask : !!mergedMask;\n  var mergedMaskStyle = typeof mergedMask === 'boolean' ? undefined : mergedMask;\n\n  // when targetElement is not exist, use body as triggerDOMNode\n  var getTriggerDOMNode = function getTriggerDOMNode(node) {\n    return node || targetElement || document.body;\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Mask, {\n    zIndex: zIndex,\n    prefixCls: prefixCls,\n    pos: posInfo,\n    showMask: mergedShowMask,\n    style: mergedMaskStyle === null || mergedMaskStyle === void 0 ? void 0 : mergedMaskStyle.style,\n    fill: mergedMaskStyle === null || mergedMaskStyle === void 0 ? void 0 : mergedMaskStyle.color,\n    open: mergedOpen,\n    animated: animated,\n    rootClassName: rootClassName,\n    disabledInteraction: disabledInteraction\n  }), /*#__PURE__*/React.createElement(Trigger, _extends({}, restProps, {\n    builtinPlacements: mergedBuiltinPlacements,\n    ref: triggerRef,\n    popupStyle: stepStyle,\n    popupPlacement: mergedPlacement,\n    popupVisible: mergedOpen,\n    popupClassName: classNames(rootClassName, stepClassName),\n    prefixCls: prefixCls,\n    popup: getPopupElement,\n    forceRender: false,\n    destroyPopupOnHide: true,\n    zIndex: zIndex,\n    getTriggerDOMNode: getTriggerDOMNode,\n    arrow: !!mergedArrow\n  }), /*#__PURE__*/React.createElement(Portal, {\n    open: mergedOpen,\n    autoLock: true\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(rootClassName, \"\".concat(prefixCls, \"-target-placeholder\")),\n    style: _objectSpread(_objectSpread({}, posInfo || CENTER_PLACEHOLDER), {}, {\n      position: 'fixed',\n      pointerEvents: 'none'\n    })\n  }))));\n};\nexport default Tour;"]},"metadata":{},"sourceType":"module"}