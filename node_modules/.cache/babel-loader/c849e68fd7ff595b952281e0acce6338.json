{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\n\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  var scrollXOffset = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset;\n  var scrollYOffset = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;\n  return {\n    pageX: obj.pageX - scrollXOffset,\n    pageY: obj.pageY - scrollYOffset\n  };\n}\n\nfunction useColorDrag(props) {\n  var offset = props.offset,\n      targetRef = props.targetRef,\n      containerRef = props.containerRef,\n      direction = props.direction,\n      onDragChange = props.onDragChange,\n      onDragChangeComplete = props.onDragChangeComplete,\n      calculate = props.calculate,\n      color = props.color,\n      disabledDrag = props.disabledDrag;\n\n  var _useState = useState(offset || {\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      offsetValue = _useState2[0],\n      setOffsetValue = _useState2[1];\n\n  var mouseMoveRef = useRef(null);\n  var mouseUpRef = useRef(null);\n  var dragRef = useRef({\n    flag: false\n  });\n  useEffect(function () {\n    if (dragRef.current.flag === false) {\n      var calcOffset = calculate === null || calculate === void 0 ? void 0 : calculate(containerRef);\n\n      if (calcOffset) {\n        setOffsetValue(calcOffset);\n      }\n    }\n  }, [color, containerRef]);\n  useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveRef.current);\n      document.removeEventListener('mouseup', mouseUpRef.current);\n      document.removeEventListener('touchmove', mouseMoveRef.current);\n      document.removeEventListener('touchend', mouseUpRef.current);\n      mouseMoveRef.current = null;\n      mouseUpRef.current = null;\n    };\n  }, []);\n\n  var updateOffset = function updateOffset(e) {\n    var _getPosition = getPosition(e),\n        pageX = _getPosition.pageX,\n        pageY = _getPosition.pageY;\n\n    var _containerRef$current = containerRef.current.getBoundingClientRect(),\n        rectX = _containerRef$current.x,\n        rectY = _containerRef$current.y,\n        width = _containerRef$current.width,\n        height = _containerRef$current.height;\n\n    var _targetRef$current$ge = targetRef.current.getBoundingClientRect(),\n        targetWidth = _targetRef$current$ge.width,\n        targetHeight = _targetRef$current$ge.height;\n\n    var centerOffsetX = targetWidth / 2;\n    var centerOffsetY = targetHeight / 2;\n    var offsetX = Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n    var offsetY = Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n    var calcOffset = {\n      x: offsetX,\n      y: direction === 'x' ? offsetValue.y : offsetY\n    }; // Exclusion of boundary cases\n\n    if (targetWidth === 0 && targetHeight === 0 || targetWidth !== targetHeight) {\n      return false;\n    }\n\n    setOffsetValue(calcOffset);\n    onDragChange === null || onDragChange === void 0 || onDragChange(calcOffset);\n  };\n\n  var onDragMove = function onDragMove(e) {\n    e.preventDefault();\n    updateOffset(e);\n  };\n\n  var onDragStop = function onDragStop(e) {\n    e.preventDefault();\n    dragRef.current.flag = false;\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n    onDragChangeComplete === null || onDragChangeComplete === void 0 || onDragChangeComplete();\n  };\n\n  var onDragStart = function onDragStart(e) {\n    // https://github.com/ant-design/ant-design/issues/43529\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n\n    if (disabledDrag) {\n      return;\n    }\n\n    updateOffset(e);\n    dragRef.current.flag = true;\n    document.addEventListener('mousemove', onDragMove);\n    document.addEventListener('mouseup', onDragStop);\n    document.addEventListener('touchmove', onDragMove);\n    document.addEventListener('touchend', onDragStop);\n    mouseMoveRef.current = onDragMove;\n    mouseUpRef.current = onDragStop;\n  };\n\n  return [offsetValue, onDragStart];\n}\n\nexport default useColorDrag;","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Music/node_modules/@rc-component/color-picker/es/hooks/useColorDrag.js"],"names":["_slicedToArray","useEffect","useRef","useState","getPosition","e","obj","touches","scrollXOffset","document","documentElement","scrollLeft","body","window","pageXOffset","scrollYOffset","scrollTop","pageYOffset","pageX","pageY","useColorDrag","props","offset","targetRef","containerRef","direction","onDragChange","onDragChangeComplete","calculate","color","disabledDrag","_useState","x","y","_useState2","offsetValue","setOffsetValue","mouseMoveRef","mouseUpRef","dragRef","flag","current","calcOffset","removeEventListener","updateOffset","_getPosition","_containerRef$current","getBoundingClientRect","rectX","rectY","width","height","_targetRef$current$ge","targetWidth","targetHeight","centerOffsetX","centerOffsetY","offsetX","Math","max","min","offsetY","onDragMove","preventDefault","onDragStop","onDragStart","addEventListener"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nfunction getPosition(e) {\n  var obj = 'touches' in e ? e.touches[0] : e;\n  var scrollXOffset = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset;\n  var scrollYOffset = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;\n  return {\n    pageX: obj.pageX - scrollXOffset,\n    pageY: obj.pageY - scrollYOffset\n  };\n}\nfunction useColorDrag(props) {\n  var offset = props.offset,\n    targetRef = props.targetRef,\n    containerRef = props.containerRef,\n    direction = props.direction,\n    onDragChange = props.onDragChange,\n    onDragChangeComplete = props.onDragChangeComplete,\n    calculate = props.calculate,\n    color = props.color,\n    disabledDrag = props.disabledDrag;\n  var _useState = useState(offset || {\n      x: 0,\n      y: 0\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    offsetValue = _useState2[0],\n    setOffsetValue = _useState2[1];\n  var mouseMoveRef = useRef(null);\n  var mouseUpRef = useRef(null);\n  var dragRef = useRef({\n    flag: false\n  });\n  useEffect(function () {\n    if (dragRef.current.flag === false) {\n      var calcOffset = calculate === null || calculate === void 0 ? void 0 : calculate(containerRef);\n      if (calcOffset) {\n        setOffsetValue(calcOffset);\n      }\n    }\n  }, [color, containerRef]);\n  useEffect(function () {\n    return function () {\n      document.removeEventListener('mousemove', mouseMoveRef.current);\n      document.removeEventListener('mouseup', mouseUpRef.current);\n      document.removeEventListener('touchmove', mouseMoveRef.current);\n      document.removeEventListener('touchend', mouseUpRef.current);\n      mouseMoveRef.current = null;\n      mouseUpRef.current = null;\n    };\n  }, []);\n  var updateOffset = function updateOffset(e) {\n    var _getPosition = getPosition(e),\n      pageX = _getPosition.pageX,\n      pageY = _getPosition.pageY;\n    var _containerRef$current = containerRef.current.getBoundingClientRect(),\n      rectX = _containerRef$current.x,\n      rectY = _containerRef$current.y,\n      width = _containerRef$current.width,\n      height = _containerRef$current.height;\n    var _targetRef$current$ge = targetRef.current.getBoundingClientRect(),\n      targetWidth = _targetRef$current$ge.width,\n      targetHeight = _targetRef$current$ge.height;\n    var centerOffsetX = targetWidth / 2;\n    var centerOffsetY = targetHeight / 2;\n    var offsetX = Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n    var offsetY = Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n    var calcOffset = {\n      x: offsetX,\n      y: direction === 'x' ? offsetValue.y : offsetY\n    };\n\n    // Exclusion of boundary cases\n    if (targetWidth === 0 && targetHeight === 0 || targetWidth !== targetHeight) {\n      return false;\n    }\n    setOffsetValue(calcOffset);\n    onDragChange === null || onDragChange === void 0 || onDragChange(calcOffset);\n  };\n  var onDragMove = function onDragMove(e) {\n    e.preventDefault();\n    updateOffset(e);\n  };\n  var onDragStop = function onDragStop(e) {\n    e.preventDefault();\n    dragRef.current.flag = false;\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n    onDragChangeComplete === null || onDragChangeComplete === void 0 || onDragChangeComplete();\n  };\n  var onDragStart = function onDragStart(e) {\n    // https://github.com/ant-design/ant-design/issues/43529\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    if (disabledDrag) {\n      return;\n    }\n    updateOffset(e);\n    dragRef.current.flag = true;\n    document.addEventListener('mousemove', onDragMove);\n    document.addEventListener('mouseup', onDragStop);\n    document.addEventListener('touchmove', onDragMove);\n    document.addEventListener('touchend', onDragStop);\n    mouseMoveRef.current = onDragMove;\n    mouseUpRef.current = onDragStop;\n  };\n  return [offsetValue, onDragStart];\n}\nexport default useColorDrag;"]},"metadata":{},"sourceType":"module"}