{"ast":null,"code":"import { useEvent } from 'rc-util';\nimport raf from \"rc-util/es/raf\";\nimport isVisible from \"rc-util/es/Dom/isVisible\";\nimport * as React from 'react';\nvar SPEED_PTG = 1 / 3;\nexport default function useScrollTo(ulRef, value) {\n  // ========================= Scroll =========================\n  var scrollingRef = React.useRef(false);\n  var scrollRafRef = React.useRef(null);\n  var scrollDistRef = React.useRef(null);\n\n  var isScrolling = function isScrolling() {\n    return scrollingRef.current;\n  };\n\n  var stopScroll = function stopScroll() {\n    raf.cancel(scrollRafRef.current);\n    scrollingRef.current = false;\n  };\n\n  var scrollRafTimesRef = React.useRef();\n\n  var startScroll = function startScroll() {\n    var ul = ulRef.current;\n    scrollDistRef.current = null;\n    scrollRafTimesRef.current = 0;\n\n    if (ul) {\n      var targetLi = ul.querySelector(\"[data-value=\\\"\".concat(value, \"\\\"]\"));\n      var firstLi = ul.querySelector(\"li\");\n\n      var doScroll = function doScroll() {\n        stopScroll();\n        scrollingRef.current = true;\n        scrollRafTimesRef.current += 1;\n        var currentTop = ul.scrollTop;\n        var firstLiTop = firstLi.offsetTop;\n        var targetLiTop = targetLi.offsetTop;\n        var targetTop = targetLiTop - firstLiTop; // Wait for element exist. 5 frames is enough\n\n        if (targetLiTop === 0 && targetLi !== firstLi || !isVisible(ul)) {\n          if (scrollRafTimesRef.current <= 5) {\n            scrollRafRef.current = raf(doScroll);\n          }\n\n          return;\n        }\n\n        var nextTop = currentTop + (targetTop - currentTop) * SPEED_PTG;\n        var dist = Math.abs(targetTop - nextTop); // Break if dist get larger, which means user is scrolling\n\n        if (scrollDistRef.current !== null && scrollDistRef.current < dist) {\n          stopScroll();\n          return;\n        }\n\n        scrollDistRef.current = dist; // Stop when dist is less than 1\n\n        if (dist <= 1) {\n          ul.scrollTop = targetTop;\n          stopScroll();\n          return;\n        } // IE not support `scrollTo`\n\n\n        ul.scrollTop = nextTop;\n        scrollRafRef.current = raf(doScroll);\n      };\n\n      if (targetLi && firstLi) {\n        doScroll();\n      }\n    }\n  }; // ======================== Trigger =========================\n\n\n  var syncScroll = useEvent(startScroll);\n  return [syncScroll, stopScroll, isScrolling];\n}","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Music/node_modules/rc-picker/es/PickerPanel/TimePanel/TimePanelBody/useScrollTo.js"],"names":["useEvent","raf","isVisible","React","SPEED_PTG","useScrollTo","ulRef","value","scrollingRef","useRef","scrollRafRef","scrollDistRef","isScrolling","current","stopScroll","cancel","scrollRafTimesRef","startScroll","ul","targetLi","querySelector","concat","firstLi","doScroll","currentTop","scrollTop","firstLiTop","offsetTop","targetLiTop","targetTop","nextTop","dist","Math","abs","syncScroll"],"mappings":"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","sourcesContent":["import { useEvent } from 'rc-util';\nimport raf from \"rc-util/es/raf\";\nimport isVisible from \"rc-util/es/Dom/isVisible\";\nimport * as React from 'react';\nvar SPEED_PTG = 1 / 3;\nexport default function useScrollTo(ulRef, value) {\n  // ========================= Scroll =========================\n  var scrollingRef = React.useRef(false);\n  var scrollRafRef = React.useRef(null);\n  var scrollDistRef = React.useRef(null);\n  var isScrolling = function isScrolling() {\n    return scrollingRef.current;\n  };\n  var stopScroll = function stopScroll() {\n    raf.cancel(scrollRafRef.current);\n    scrollingRef.current = false;\n  };\n  var scrollRafTimesRef = React.useRef();\n  var startScroll = function startScroll() {\n    var ul = ulRef.current;\n    scrollDistRef.current = null;\n    scrollRafTimesRef.current = 0;\n    if (ul) {\n      var targetLi = ul.querySelector(\"[data-value=\\\"\".concat(value, \"\\\"]\"));\n      var firstLi = ul.querySelector(\"li\");\n      var doScroll = function doScroll() {\n        stopScroll();\n        scrollingRef.current = true;\n        scrollRafTimesRef.current += 1;\n        var currentTop = ul.scrollTop;\n        var firstLiTop = firstLi.offsetTop;\n        var targetLiTop = targetLi.offsetTop;\n        var targetTop = targetLiTop - firstLiTop;\n\n        // Wait for element exist. 5 frames is enough\n        if (targetLiTop === 0 && targetLi !== firstLi || !isVisible(ul)) {\n          if (scrollRafTimesRef.current <= 5) {\n            scrollRafRef.current = raf(doScroll);\n          }\n          return;\n        }\n        var nextTop = currentTop + (targetTop - currentTop) * SPEED_PTG;\n        var dist = Math.abs(targetTop - nextTop);\n\n        // Break if dist get larger, which means user is scrolling\n        if (scrollDistRef.current !== null && scrollDistRef.current < dist) {\n          stopScroll();\n          return;\n        }\n        scrollDistRef.current = dist;\n\n        // Stop when dist is less than 1\n        if (dist <= 1) {\n          ul.scrollTop = targetTop;\n          stopScroll();\n          return;\n        }\n\n        // IE not support `scrollTo`\n        ul.scrollTop = nextTop;\n        scrollRafRef.current = raf(doScroll);\n      };\n      if (targetLi && firstLi) {\n        doScroll();\n      }\n    }\n  };\n\n  // ======================== Trigger =========================\n  var syncScroll = useEvent(startScroll);\n  return [syncScroll, stopScroll, isScrolling];\n}"]},"metadata":{},"sourceType":"module"}